include.set_path("apps");include.css("all","validationEngine.jquery");include.resources("main/string","main/wizard_step_view_helpers","main/init_helper","jquery.validationEngine-2.6.4","languages/jquery.validationEngine-en","webtoolkit.base64","main/noty_helper");include.engines("Wizard","FileUpload","MdlDialog");include.plugins("controller","controller/stateful","view","view/helpers","dom/element","model/jsonp","io/ajax");
include(function(){include.models("main/DataSet","main/WelcomeStep","main/WizardStep","main/FinalStep");include.controllers("main","Wizard","main/Welcome");include.views("views/main/WelcomeStep","views/main/FinalStep","views/main/wizard.step.field","views/main/wizard.step.fieldset","views/main/wizard.step.multichoice","views/main/wizard.step.upload","views/main/final.value","views/main/Welcome/create","views/main/Welcome/dataset_row","views/main/Welcome/upload")});include.set_path("resources/main");
String.prototype.contains=function(a){return"string"!=(typeof a).toLowerCase()?!1:-1<this.indexOf(a)};include.set_path("resources/main");
WizardStepViewHelpers={printField:function(a,c,b){if("web"!=c.visibility.toLowerCase())return"";a=MVC.Object.extend({},c);a.values=b;return(new View({url:"views/main/wizard.step.field.ejs"})).render(a,this)},printForm:function(a,c,b){a=MVC.Object.extend({},c);a.values=b;return(new View({url:"views/main/wizard.step."+c.type+".ejs"})).render(a,this)},isRequired:function(a){return null!=a&&a.contains("required")},printAsterisk:function(a){return this.isRequired(a)?"*":""},printInput:function(a,c,b,d,
e){var f;f=[];f.push("validate[");f.push(b);f.push("]");d&&f.push(" ui-state-disabled");f=f.join("");b={};d&&(b.readonly=!0);b.klass=f;d=e[c]?e[c]:"";switch(a.toLowerCase()){case "text":return b.size="17 x 5",this.text_area_tag(c,d,b);case "file_multiply":b.klass+=" multi ",b.multiple=!0;case "file":return b.linkId=c,this.file_tag(c,"",b)+this.hidden_field_tag(c,"",{})+this.single_tag_for("div",{id:c+"-list"});default:return this.input_field_tag(c,d,"text",b)}}};include.set_path("resources/main");
function InitHelper(a){function c(b){b.errors?$.each(b.errors,function(a){noty.error(b.errors[a])}):noty.error("Unexpected error has occurred!")}function b(){WizardController.wizard.addForm(new FinalStep);try{WizardController.initialize(),$('form.step[type="upload"]').each(function(){var b=WizardStep.find_by_element($(this).get(0));Controller.publish("FileUpload.initialize",{data:b})})}catch(b){noty.error(b.message)}$(".regular-form").validationEngine();DataSet.find_all({},{onComplete:function(b){console.log("DataSets are loaded.");
a();$("#loading-box").toggle();$("#example-2").toggle()},onFailure:c})}var d=WizardController.newWizardEngine(),e=new WelcomeStep;d.addForm(e);(function(){WizardStep.find_all({},{onComplete:function(a){for(var c=0,e=a.length;c<e;++c)d.addForm(a[c]);b()},onFailure:c})})()}include.set_path("resources");
(function(a){var c={init:function(b){this.data("jqv")&&null!=this.data("jqv")||(b=c._saveOptions(this,b),a(document).on("click",".formError",function(){a(this).fadeOut(150,function(){a(this).parent(".formErrorOuter").remove();a(this).remove()})}));return this},attach:function(b){b=b?c._saveOptions(this,b):this.data("jqv");b.validateAttribute=this.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class";b.binded&&(this.on(b.validationEventTrigger,"["+b.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",
c._onFieldEvent),this.on("click","["+b.validateAttribute+"*=validate][type=checkbox],["+b.validateAttribute+"*=validate][type=radio]",c._onFieldEvent),this.on(b.validationEventTrigger,"["+b.validateAttribute+"*=validate][class*=datepicker]",{delay:300},c._onFieldEvent));b.autoPositionUpdate&&a(window).bind("resize",{noAnimation:!0,formElem:this},c.updatePromptsPosition);this.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",
c._submitButtonClick);this.removeData("jqv_submitButton");this.on("submit",c._onSubmitEvent);return this},detach:function(){var b=this.data("jqv");this.find("["+b.validateAttribute+"*=validate]").not("[type=checkbox]").off(b.validationEventTrigger,c._onFieldEvent);this.find("["+b.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",c._onFieldEvent);this.off("submit",c.onAjaxFormComplete);this.off("submit",c.onAjaxFormComplete);this.removeData("jqv");this.off("click",
"a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",c._submitButtonClick);this.removeData("jqv_submitButton");b.autoPositionUpdate&&a(window).unbind("resize",c.updatePromptsPosition);return this},validate:function(){var b=a(this),d=null;if(b.is("form")||b.hasClass("validationEngineContainer")){if(b.hasClass("validating"))return!1;b.addClass("validating");
var e=b.data("jqv"),d=c._validateFields(this);setTimeout(function(){b.removeClass("validating")},100);if(d&&e.onSuccess)e.onSuccess();else if(!d&&e.onFailure)e.onFailure()}else if(b.is("form")||b.hasClass("validationEngineContainer"))b.removeClass("validating");else{var f=b.closest("form, .validationEngineContainer"),e=f.data("jqv")?f.data("jqv"):a.validationEngine.defaults;if((d=c._validateField(b,e))&&e.onFieldSuccess)e.onFieldSuccess();else if(e.onFieldFailure&&0<e.InvalidFields.length)e.onFieldFailure()}return e.onValidationComplete?
!!e.onValidationComplete(f,d):d},updatePromptsPosition:function(b){if(b&&this==window)var d=b.data.formElem,e=b.data.noAnimation;else d=a(this.closest("form, .validationEngineContainer"));var f=d.data("jqv");d.find("["+f.validateAttribute+"*=validate]").not(":disabled").each(function(){var b=a(this);f.prettySelect&&b.is(":hidden")&&(b=d.find("#"+f.usePrefix+b.attr("id")+f.useSuffix));var h=c._getPrompt(b),k=a(h).find(".formErrorContent").html();h&&c._updatePrompt(b,a(h),k,void 0,!1,f,e)});return this},
showPrompt:function(b,a,e,f){var g=this.closest("form, .validationEngineContainer").data("jqv");g||(g=c._saveOptions(this,g));e&&(g.promptPosition=e);g.showArrow=1==f;c._showPrompt(this,b,a,!1,g);return this},hide:function(){var b=a(this).closest("form, .validationEngineContainer").data("jqv"),b=b&&b.fadeDuration?b.fadeDuration:.3,d;d=a(this).is("form")||a(this).hasClass("validationEngineContainer")?"parentForm"+c._getClassName(a(this).attr("id")):c._getClassName(a(this).attr("id"))+"formError";a("."+
d).fadeTo(b,.3,function(){a(this).parent(".formErrorOuter").remove();a(this).remove()});return this},hideAll:function(){var b=this.data("jqv"),b=b?b.fadeDuration:300;a(".formError").fadeTo(b,300,function(){a(this).parent(".formErrorOuter").remove();a(this).remove()});return this},_onFieldEvent:function(b){var d=a(this),e=d.closest("form, .validationEngineContainer").data("jqv");e.eventTrigger="field";window.setTimeout(function(){c._validateField(d,e);if(0==e.InvalidFields.length&&e.onFieldSuccess)e.onFieldSuccess();
else if(0<e.InvalidFields.length&&e.onFieldFailure)e.onFieldFailure()},b.data?b.data.delay:0)},_onSubmitEvent:function(){var b=a(this),d=b.data("jqv");if(b.data("jqv_submitButton")){var e=a("#"+b.data("jqv_submitButton"));if(e&&0<e.length&&(e.hasClass("validate-skip")||"true"==e.attr("data-validation-engine-skip")))return!0}d.eventTrigger="submit";return(e=c._validateFields(b))&&d.ajaxFormValidation?(c._validateFormWithAjax(b,d),!1):d.onValidationComplete?!!d.onValidationComplete(b,e):e},_checkAjaxStatus:function(b){var c=
!0;a.each(b.ajaxValidCache,function(b,a){if(!a)return c=!1});return c},_checkAjaxFieldStatus:function(b,a){return 1==a.ajaxValidCache[b]},_validateFields:function(b){var d=b.data("jqv"),e=!1;b.trigger("jqv.form.validating");var f=null;b.find("["+d.validateAttribute+"*=validate]").not(":disabled").each(function(){var h=a(this),g=[];if(0>a.inArray(h.attr("name"),g)){(e|=c._validateField(h,d))&&null==f&&(f=h.is(":hidden")&&d.prettySelect?h=b.find("#"+d.usePrefix+c._jqSelector(h.attr("id"))+d.useSuffix):
h);if(d.doNotShowAllErrosOnSubmit)return!1;g.push(h.attr("name"));if(1==d.showOneMessage&&e)return!1}});b.trigger("jqv.form.result",[e]);if(e){if(d.scroll){var g=f.offset().top,h=f.offset().left,k=d.promptPosition;"string"==typeof k&&-1!=k.indexOf(":")&&(k=k.substring(0,k.indexOf(":")));"bottomRight"!=k&&"bottomLeft"!=k&&(k=c._getPrompt(f))&&(g=k.offset().top);d.scrollOffset&&(g-=d.scrollOffset);if(d.isOverflown){k=a(d.overflownDIV);if(!k.length)return!1;h=k.scrollTop();k=-parseInt(k.offset().top);
g+=h+k-5;a(d.overflownDIV+":not(:animated)").animate({scrollTop:g},1100,function(){d.focusFirstField&&f.focus()})}else a("html, body").animate({scrollTop:g},1100,function(){d.focusFirstField&&f.focus()}),a("html, body").animate({scrollLeft:h},1100)}else d.focusFirstField&&f.focus();return!1}return!0},_validateFormWithAjax:function(b,d){var e=b.serialize(),f=d.ajaxFormValidationMethod?d.ajaxFormValidationMethod:"GET",g=d.ajaxFormValidationURL?d.ajaxFormValidationURL:b.attr("action"),h=d.dataType?d.dataType:
"json";a.ajax({type:f,url:g,cache:!1,dataType:h,data:e,form:b,methods:c,options:d,beforeSend:function(){return d.onBeforeAjaxFormValidation(b,d)},error:function(b,a){c._ajaxError(b,a)},success:function(e){if("json"==h&&!0!==e){for(var f=!1,g=0;g<e.length;g++){var n=e[g],m=a(a("#"+n[0])[0]);if(1==m.length){var r=n[2];1==n[1]?""!=r&&r?(d.allrules[r]&&(n=d.allrules[r].alertTextOk)&&(r=n),d.showPrompts&&c._showPrompt(m,r,"pass",!1,d,!0)):c._closePrompt(m):(f|=1,d.allrules[r]&&(n=d.allrules[r].alertText)&&
(r=n),d.showPrompts&&c._showPrompt(m,r,"",!1,d,!0))}}d.onAjaxFormComplete(!f,b,e,d)}else d.onAjaxFormComplete(!0,b,e,d)}})},_validateField:function(b,d,e){b.attr("id")||(b.attr("id","form-validation-field-"+a.validationEngine.fieldIdCounter),++a.validationEngine.fieldIdCounter);if(!d.validateNonVisibleFields&&(b.is(":hidden")&&!d.prettySelect||b.parent().is(":hidden")))return!1;var f=b.attr(d.validateAttribute),f=/validate\[(.*)\]/.exec(f);if(!f)return!1;var g=f[1].split(/\[|,|\]/),f=b.attr("name"),
h="",k="",l=!1,p=!1;d.isError=!1;d.showArrow=!0;0<d.maxErrorsPerField&&(p=!0);for(var n=a(b.closest("form, .validationEngineContainer")),m=0;m<g.length;m++)g[m]=g[m].replace(" ",""),""===g[m]&&delete g[m];for(var r=m=0;m<g.length;m++){if(p&&r>=d.maxErrorsPerField){l||(e=a.inArray("required",g),l=-1!=e&&e>=m);break}var q=void 0;switch(g[m]){case "required":l=!0;q=c._getErrorMessage(n,b,g[m],g,m,d,c._required);break;case "custom":q=c._getErrorMessage(n,b,g[m],g,m,d,c._custom);break;case "groupRequired":var s=
"["+d.validateAttribute+"*="+g[m+1]+"]",q=n.find(s).eq(0);q[0]!=b[0]&&(c._validateField(q,d,e),d.showArrow=!0);(q=c._getErrorMessage(n,b,g[m],g,m,d,c._groupRequired))&&(l=!0);d.showArrow=!1;break;case "ajax":(q=c._ajax(b,g,m,d))&&(k="load");break;case "minSize":q=c._getErrorMessage(n,b,g[m],g,m,d,c._minSize);break;case "maxSize":q=c._getErrorMessage(n,b,g[m],g,m,d,c._maxSize);break;case "min":q=c._getErrorMessage(n,b,g[m],g,m,d,c._min);break;case "max":q=c._getErrorMessage(n,b,g[m],g,m,d,c._max);
break;case "past":q=c._getErrorMessage(n,b,g[m],g,m,d,c._past);break;case "future":q=c._getErrorMessage(n,b,g[m],g,m,d,c._future);break;case "dateRange":s="["+d.validateAttribute+"*="+g[m+1]+"]";d.firstOfGroup=n.find(s).eq(0);d.secondOfGroup=n.find(s).eq(1);if(d.firstOfGroup[0].value||d.secondOfGroup[0].value)q=c._getErrorMessage(n,b,g[m],g,m,d,c._dateRange);q&&(l=!0);d.showArrow=!1;break;case "dateTimeRange":s="["+d.validateAttribute+"*="+g[m+1]+"]";d.firstOfGroup=n.find(s).eq(0);d.secondOfGroup=
n.find(s).eq(1);if(d.firstOfGroup[0].value||d.secondOfGroup[0].value)q=c._getErrorMessage(n,b,g[m],g,m,d,c._dateTimeRange);q&&(l=!0);d.showArrow=!1;break;case "maxCheckbox":b=a(n.find("input[name='"+f+"']"));q=c._getErrorMessage(n,b,g[m],g,m,d,c._maxCheckbox);break;case "minCheckbox":b=a(n.find("input[name='"+f+"']"));q=c._getErrorMessage(n,b,g[m],g,m,d,c._minCheckbox);break;case "equals":q=c._getErrorMessage(n,b,g[m],g,m,d,c._equals);break;case "funcCall":q=c._getErrorMessage(n,b,g[m],g,m,d,c._funcCall);
break;case "creditCard":q=c._getErrorMessage(n,b,g[m],g,m,d,c._creditCard);break;case "condRequired":q=c._getErrorMessage(n,b,g[m],g,m,d,c._condRequired),void 0!==q&&(l=!0)}s=!1;if("object"==typeof q)switch(q.status){case "_break":s=!0;break;case "_error":q=q.message;break;case "_error_no_prompt":return!0}if(s)break;"string"==typeof q&&(h+=q+"<br/>",d.isError=!0,r++)}!l&&!b.val()&&1>b.val().length&&(d.isError=!1);e=b.prop("type");m=b.data("promptPosition")||d.promptPosition;("radio"==e||"checkbox"==
e)&&1<n.find("input[name='"+f+"']").size()&&(b="inline"===m?a(n.find("input[name='"+f+"'][type!=hidden]:last")):a(n.find("input[name='"+f+"'][type!=hidden]:first")),d.showArrow=!1);b.is(":hidden")&&d.prettySelect&&(b=n.find("#"+d.usePrefix+c._jqSelector(b.attr("id"))+d.useSuffix));d.isError&&d.showPrompts?c._showPrompt(b,h,k,!1,d):c._closePrompt(b);b.trigger("jqv.field.result",[b,d.isError,h]);f=a.inArray(b[0],d.InvalidFields);-1==f?d.isError&&d.InvalidFields.push(b[0]):d.isError||d.InvalidFields.splice(f,
1);c._handleStatusCssClasses(b,d);if(d.isError&&d.onFieldFailure)d.onFieldFailure(b);if(!d.isError&&d.onFieldSuccess)d.onFieldSuccess(b);return d.isError},_handleStatusCssClasses:function(b,a){a.addSuccessCssClassToField&&b.removeClass(a.addSuccessCssClassToField);a.addFailureCssClassToField&&b.removeClass(a.addFailureCssClassToField);a.addSuccessCssClassToField&&!a.isError&&b.addClass(a.addSuccessCssClassToField);a.addFailureCssClassToField&&a.isError&&b.addClass(a.addFailureCssClassToField)},_getErrorMessage:function(b,
d,e,f,g,h,k){var l=jQuery.inArray(e,f);if("custom"===e||"funcCall"===e)e=e+"["+f[l+1]+"]",delete f[l];var l=e,p=(d.attr("data-validation-engine")?d.attr("data-validation-engine"):d.attr("class")).split(" ");b="future"==e||"past"==e||"maxCheckbox"==e||"minCheckbox"==e?k(b,d,f,g,h):k(d,f,g,h);void 0!=b&&(d=c._getCustomErrorMessage(a(d),p,l,h))&&(b=d);return b},_getCustomErrorMessage:function(b,a,e,f){var g=!1,g=/^custom\[.*\]$/.test(e)?c._validityProp.custom:c._validityProp[e];if(void 0!=g&&(g=b.attr("data-errormessage-"+
g),void 0!=g))return g;g=b.attr("data-errormessage");if(void 0!=g)return g;b="#"+b.attr("id");if("undefined"!=typeof f.custom_error_messages[b]&&"undefined"!=typeof f.custom_error_messages[b][e])g=f.custom_error_messages[b][e].message;else if(0<a.length)for(b=0;b<a.length&&0<a.length;b++){var h="."+a[b];if("undefined"!=typeof f.custom_error_messages[h]&&"undefined"!=typeof f.custom_error_messages[h][e]){g=f.custom_error_messages[h][e].message;break}}g||"undefined"==typeof f.custom_error_messages[e]||
"undefined"==typeof f.custom_error_messages[e].message||(g=f.custom_error_messages[e].message);return g},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",
creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(b,c,e,f,g){switch(b.prop("type")){default:g=a.trim(b.val());var h=a.trim(b.attr("data-validation-placeholder"));b=a.trim(b.attr("placeholder"));if(!g||h&&g==h||b&&g==b)return f.allrules[c[e]].alertText;break;case "radio":case "checkbox":if(g){if(!b.attr("checked"))return f.allrules[c[e]].alertTextCheckboxMultiple;break}g=b.closest("form, .validationEngineContainer");b=b.attr("name");if(0==g.find("input[name='"+b+"']:checked").size())return 1==
g.find("input[name='"+b+"']:visible").size()?f.allrules[c[e]].alertTextCheckboxe:f.allrules[c[e]].alertTextCheckboxMultiple}},_groupRequired:function(b,d,e,f){var g="["+f.validateAttribute+"*="+d[e+1]+"]",h=!1;b.closest("form, .validationEngineContainer").find(g).each(function(){if(!c._required(a(this),d,e,f))return h=!0,!1});if(!h)return f.allrules[d[e]].alertText},_custom:function(b,a,c,f){var g=a[c+1],h=f.allrules[g];if(h)if(h.regex)if(a=h.regex,!a)alert("jqv:custom regex not found - "+g);else{if(!(new RegExp(a)).test(b.val()))return f.allrules[g].alertText}else if(h.func)if(h=
h.func,"function"!==typeof h)alert("jqv:custom parameter 'function' is no function - "+g);else{if(!h(b,a,c,f))return f.allrules[g].alertText}else alert("jqv:custom type not allowed "+g);else alert("jqv:custom rule not found - "+g)},_funcCall:function(b,a,c,f){var g=a[c+1];if(-1<g.indexOf(".")){for(var g=g.split("."),h=window;g.length;)h=h[g.shift()];g=h}else g=window[g]||f.customFunctions[g];if("function"==typeof g)return g(b,a,c,f)},_equals:function(b,c,e,f){c=c[e+1];if(b.val()!=a("#"+c).val())return f.allrules.equals.alertText},
_maxSize:function(b,a,c,f){a=a[c+1];if(b.val().length>a)return b=f.allrules.maxSize,b.alertText+a+b.alertText2},_minSize:function(b,a,c,f){a=a[c+1];if(b.val().length<a)return b=f.allrules.minSize,b.alertText+a+b.alertText2},_min:function(b,a,c,f){a=parseFloat(a[c+1]);if(parseFloat(b.val())<a)return b=f.allrules.min,b.alertText2?b.alertText+a+b.alertText2:b.alertText+a},_max:function(b,a,c,f){a=parseFloat(a[c+1]);if(parseFloat(b.val())>a)return b=f.allrules.max,b.alertText2?b.alertText+a+b.alertText2:
b.alertText+a},_past:function(b,d,e,f,g){e=e[f+1];b=a(b.find("input[name='"+e.replace(/^#+/,"")+"']"));if("now"==e.toLowerCase())b=new Date;else if(void 0!=b.val()){if(b.is(":disabled"))return;b=c._parseDate(b.val())}else b=c._parseDate(e);if(c._parseDate(d.val())>b)return d=g.allrules.past,d.alertText2?d.alertText+c._dateToString(b)+d.alertText2:d.alertText+c._dateToString(b)},_future:function(b,d,e,f,g){e=e[f+1];b=a(b.find("input[name='"+e.replace(/^#+/,"")+"']"));if("now"==e.toLowerCase())b=new Date;
else if(void 0!=b.val()){if(b.is(":disabled"))return;b=c._parseDate(b.val())}else b=c._parseDate(e);if(c._parseDate(d.val())<b)return d=g.allrules.future,d.alertText2?d.alertText+c._dateToString(b)+d.alertText2:d.alertText+c._dateToString(b)},_isDate:function(b){return(new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/)).test(b)},
_isDateTime:function(b){return(new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/)).test(b)},_dateCompare:function(b,
a){return new Date(b.toString())<new Date(a.toString())},_dateRange:function(b,a,e,f){if(!f.firstOfGroup[0].value&&f.secondOfGroup[0].value||f.firstOfGroup[0].value&&!f.secondOfGroup[0].value||!c._isDate(f.firstOfGroup[0].value)||!c._isDate(f.secondOfGroup[0].value)||!c._dateCompare(f.firstOfGroup[0].value,f.secondOfGroup[0].value))return f.allrules[a[e]].alertText+f.allrules[a[e]].alertText2},_dateTimeRange:function(b,a,e,f){if(!f.firstOfGroup[0].value&&f.secondOfGroup[0].value||f.firstOfGroup[0].value&&
!f.secondOfGroup[0].value||!c._isDateTime(f.firstOfGroup[0].value)||!c._isDateTime(f.secondOfGroup[0].value)||!c._dateCompare(f.firstOfGroup[0].value,f.secondOfGroup[0].value))return f.allrules[a[e]].alertText+f.allrules[a[e]].alertText2},_maxCheckbox:function(b,a,c,f,g){c=c[f+1];a=a.attr("name");if(b.find("input[name='"+a+"']:checked").size()>c)return g.showArrow=!1,g.allrules.maxCheckbox.alertText2?g.allrules.maxCheckbox.alertText+" "+c+" "+g.allrules.maxCheckbox.alertText2:g.allrules.maxCheckbox.alertText},
_minCheckbox:function(b,a,c,f,g){c=c[f+1];a=a.attr("name");if(b.find("input[name='"+a+"']:checked").size()<c)return g.showArrow=!1,g.allrules.minCheckbox.alertText+" "+c+" "+g.allrules.minCheckbox.alertText2},_creditCard:function(b,a,c,f){c=!1;b=b.val().replace(/ +/g,"").replace(/-+/g,"");var g=b.length;if(14<=g&&16>=g&&0<parseInt(b)){a=0;c=g-1;var g=1,h,k=new String;do h=parseInt(b.charAt(c)),k+=0==g++%2?2*h:h;while(0<=--c);for(c=0;c<k.length;c++)a+=parseInt(k.charAt(c));c=0==a%10}if(!c)return f.allrules.creditCard.alertText},
_ajax:function(b,d,e,f){var g=f.allrules[d[e+1]];e=g.extraData;var h=g.extraDataDynamic;d={fieldId:b.attr("id"),fieldValue:b.val()};if("object"===typeof e)a.extend(d,e);else if("string"===typeof e){var k=e.split("&");for(e=0;e<k.length;e++){var l=k[e].split("=");l[0]&&l[0]&&(d[l[0]]=l[1])}}if(h)for(h=String(h).split(","),e=0;e<h.length;e++)k=h[e],a(k).length&&(l=b.closest("form, .validationEngineContainer").find(k).val(),k.replace("#",""),escape(l),d[k.replace("#","")]=l);"field"==f.eventTrigger&&
delete f.ajaxValidCache[b.attr("id")];if(!f.isError&&!c._checkAjaxFieldStatus(b.attr("id"),f))return a.ajax({type:f.ajaxFormValidationMethod,url:g.url,cache:!1,dataType:"json",data:d,field:b,rule:g,methods:c,options:f,beforeSend:function(){},error:function(b,a){c._ajaxError(b,a)},success:function(d){var e=d[0],h=a("#"+e).eq(0);if(1==h.length){var k=d[2];d[1]?(f.ajaxValidCache[e]=!0,k?f.allrules[k]&&(d=f.allrules[k].alertTextOk)&&(k=d):k=g.alertTextOk,f.showPrompts&&(k?c._showPrompt(h,k,"pass",!0,
f):c._closePrompt(h)),"submit"==f.eventTrigger&&b.closest("form").submit()):(f.ajaxValidCache[e]=!1,f.isError=!0,k?f.allrules[k]&&(d=f.allrules[k].alertText)&&(k=d):k=g.alertText,f.showPrompts&&c._showPrompt(h,k,"",!0,f))}h.trigger("jqv.field.result",[h,f.isError,k])}}),g.alertTextLoad},_ajaxError:function(b,a){0==b.status&&null==a?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+b.status+" "+a)},_dateToString:function(b){return b.getFullYear()+
"-"+(b.getMonth()+1)+"-"+b.getDate()},_parseDate:function(b){var a=b.split("-");a==b&&(a=b.split("/"));return a==b?(a=b.split("."),new Date(a[2],a[1]-1,a[0])):new Date(a[0],a[1]-1,a[2])},_showPrompt:function(b,d,e,f,g,h){var k=c._getPrompt(b);h&&(k=!1);a.trim(d)&&(k?c._updatePrompt(b,k,d,e,f,g):c._buildPrompt(b,d,e,f,g))},_buildPrompt:function(b,d,e,f,g){var h=a("<div>");h.addClass(c._getClassName(b.attr("id"))+"formError");h.addClass("parentForm"+c._getClassName(b.closest("form, .validationEngineContainer").attr("id")));
h.addClass("formError");switch(e){case "pass":h.addClass("greenPopup");break;case "load":h.addClass("blackPopup")}f&&h.addClass("ajaxed");a("<div>").addClass("formErrorContent").html(d).appendTo(h);d=b.data("promptPosition")||g.promptPosition;if(g.showArrow)switch(e=a("<div>").addClass("formErrorArrow"),"string"==typeof d&&(f=d.indexOf(":"),-1!=f&&(d=d.substring(0,f))),d){case "bottomLeft":case "bottomRight":h.find(".formErrorContent").before(e);e.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');
break;case "topLeft":case "topRight":e.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),h.append(e)}g.addPromptClass&&h.addClass(g.addPromptClass);e=b.attr("data-required-class");
void 0!==e?h.addClass(e):g.prettySelect&&a("#"+b.attr("id")).next().is("select")&&(e=a("#"+b.attr("id").substr(g.usePrefix.length).substring(g.useSuffix.length)).attr("data-required-class"),void 0!==e&&h.addClass(e));h.css({opacity:0});"inline"===d?(h.addClass("inline"),"undefined"!==typeof b.attr("data-prompt-target")&&0<a("#"+b.attr("data-prompt-target")).length?h.appendTo(a("#"+b.attr("data-prompt-target"))):b.after(h)):b.before(h);f=c._calculatePosition(b,h,g);h.css({position:"inline"===d?"relative":
"absolute",top:f.callerTopPosition,left:f.callerleftPosition,marginTop:f.marginTopSize,opacity:0}).data("callerField",b);g.autoHidePrompt&&setTimeout(function(){h.animate({opacity:0},function(){h.closest(".formErrorOuter").remove();h.remove()})},g.autoHideDelay);return h.animate({opacity:.87})},_updatePrompt:function(b,a,e,f,g,h,k){a&&("undefined"!==typeof f&&("pass"==f?a.addClass("greenPopup"):a.removeClass("greenPopup"),"load"==f?a.addClass("blackPopup"):a.removeClass("blackPopup")),g?a.addClass("ajaxed"):
a.removeClass("ajaxed"),a.find(".formErrorContent").html(e),b=c._calculatePosition(b,a,h),b={top:b.callerTopPosition,left:b.callerleftPosition,marginTop:b.marginTopSize},k?a.css(b):a.animate(b))},_closePrompt:function(b){var a=c._getPrompt(b);a&&a.fadeTo("fast",0,function(){a.parent(".formErrorOuter").remove();a.remove()})},closePrompt:function(b){return c._closePrompt(b)},_getPrompt:function(b){var d=a(b).closest("form, .validationEngineContainer").attr("id");b=c._getClassName(b.attr("id"))+"formError";
if(d=a("."+c._escapeExpression(b)+".parentForm"+d)[0])return a(d)},_escapeExpression:function(b){return b.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(b){var c=a(document),e=a("body");b=b&&b.hasClass("rtl")||b&&"rtl"===(b.attr("dir")||"").toLowerCase()||c.hasClass("rtl")||"rtl"===(c.attr("dir")||"").toLowerCase()||e.hasClass("rtl")||"rtl"===(e.attr("dir")||"").toLowerCase();return Boolean(b)},_calculatePosition:function(b,a,c){var f,g,h,k=b.width(),l=b.position().left,p=
b.position().top;b.height();h=a.height();f=g=0;h=-h;c=b.data("promptPosition")||c.promptPosition;var n="",m="",r=m=0;"string"==typeof c&&-1!=c.indexOf(":")&&(n=c.substring(c.indexOf(":")+1),c=c.substring(0,c.indexOf(":")),-1!=n.indexOf(",")&&(m=n.substring(n.indexOf(",")+1),n=n.substring(0,n.indexOf(",")),r=parseInt(m),isNaN(r)&&(r=0)),m=parseInt(n),isNaN(n));switch(c){default:case "topRight":g+=l+k-30;f+=p;break;case "topLeft":f+=p;g+=l;break;case "centerRight":f=p+4;h=0;g=l+b.outerWidth(!0)+5;break;
case "centerLeft":g=l-(a.width()+2);f=p+4;h=0;break;case "bottomLeft":f=p+b.height()+5;h=0;g=l;break;case "bottomRight":g=l+k-30;f=p+b.height()+5;h=0;break;case "inline":h=f=g=0}return{callerTopPosition:f+r+"px",callerleftPosition:g+m+"px",marginTopSize:h+"px"}},_saveOptions:function(b,c){if(a.validationEngineLanguage)var e=a.validationEngineLanguage.allRules;else a.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");a.validationEngine.defaults.allrules=e;
e=a.extend(!0,{},a.validationEngine.defaults,c);b.data("jqv",e);return e},_getClassName:function(b){if(b)return b.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(b){return b.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(b,a,e,f){var g;for(e+=1;e<a.length;e++)if(g=jQuery("#"+a[e]).first(),g.length&&void 0==c._required(g,["required"],0,f,!0))return c._required(b,["required"],0,f)},_submitButtonClick:function(b){b=a(this);b.closest("form, .validationEngineContainer").data("jqv_submitButton",
b.attr("id"))}};a.fn.validationEngine=function(b){var d=a(this);if(!d[0])return d;if("string"==typeof b&&"_"!=b.charAt(0)&&c[b])return"showPrompt"!=b&&"hide"!=b&&"hideAll"!=b&&c.init.apply(d),c[b].apply(d,Array.prototype.slice.call(arguments,1));if("object"!=typeof b&&b)a.error("Method "+b+" does not exist in jQuery.validationEngine");else return c.init.apply(d,arguments),c.attach.apply(d)};a.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,
validateNonVisibleFields:!1,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:a.noop,onBeforeAjaxFormValidation:a.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",
addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1E4,fadeDuration:.3,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}};a(function(){a.validationEngine.defaults.promptPosition=c.isRTL()?"topLeft":"topRight"})})(jQuery);include.set_path("resources/languages");
(function(a){a.fn.validationEngineLanguage=function(){};a.validationEngineLanguage={newLang:function(){a.validationEngineLanguage.allRules={required:{regex:"none",alertText:"* This field is required",alertTextCheckboxMultiple:"* Please select an option",alertTextCheckboxe:"* This checkbox is required",alertTextDateRange:"* Both date range fields are required"},requiredInFunction:{func:function(a,b,d,e){return"test"==a.val()?!0:!1},alertText:"* Field must equal test"},dateRange:{regex:"none",alertText:"* Invalid ",
alertText2:"Date Range"},dateTimeRange:{regex:"none",alertText:"* Invalid ",alertText2:"Date Time Range"},minSize:{regex:"none",alertText:"* Minimum ",alertText2:" characters required"},maxSize:{regex:"none",alertText:"* Maximum ",alertText2:" characters allowed"},groupRequired:{regex:"none",alertText:"* You must fill one of the following fields"},min:{regex:"none",alertText:"* Minimum value is "},max:{regex:"none",alertText:"* Maximum value is "},past:{regex:"none",alertText:"* Date prior to "},
future:{regex:"none",alertText:"* Date past "},maxCheckbox:{regex:"none",alertText:"* Maximum ",alertText2:" options allowed"},minCheckbox:{regex:"none",alertText:"* Please select ",alertText2:" options"},equals:{regex:"none",alertText:"* Fields do not match"},creditCard:{regex:"none",alertText:"* Invalid credit card number"},phone:{regex:/^([\+][0-9]{1,3}[\ \.\-])?([\(]{1}[0-9]{2,6}[\)])?([0-9\ \.\-\/]{3,20})((x|ext|extension)[\ ]?[0-9]{1,4})?$/,alertText:"* Invalid phone number"},email:{regex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
alertText:"* Invalid email address"},integer:{regex:/^[\-\+]?\d+$/,alertText:"* Not a valid integer"},number:{regex:/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,alertText:"* Invalid floating decimal number"},date:{func:function(a){var b=(new RegExp(/^(\d{4})[\/\-\.](0?[1-9]|1[012])[\/\-\.](0?[1-9]|[12][0-9]|3[01])$/)).exec(a.val());if(null==b)return!1;a=b[1];var d=1*b[2],b=1*b[3],e=new Date(a,d-1,b);return e.getFullYear()==a&&e.getMonth()==d-1&&e.getDate()==b},alertText:"* Invalid date, must be in YYYY-MM-DD format"},
ipv4:{regex:/^((([01]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))[.]){3}(([0-1]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))$/,alertText:"* Invalid IP address"},url:{regex:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,
alertText:"* Invalid URL"},onlyNumberSp:{regex:/^[0-9\ ]+$/,alertText:"* Numbers only"},onlyLetterSp:{regex:/^[a-zA-Z\ \']+$/,alertText:"* Letters only"},onlyLetterNumber:{regex:/^[0-9a-zA-Z]+$/,alertText:"* No special characters allowed"},ajaxUserCall:{url:"ajaxValidateFieldUser",extraData:"name=eric",alertText:"* This user is already taken",alertTextLoad:"* Validating, please wait"},ajaxUserCallPhp:{url:"phpajax/ajaxValidateFieldUser.php",extraData:"name=eric",alertTextOk:"* This username is available",
alertText:"* This user is already taken",alertTextLoad:"* Validating, please wait"},ajaxNameCall:{url:"ajaxValidateFieldName",alertText:"* This name is already taken",alertTextOk:"* This name is available",alertTextLoad:"* Validating, please wait"},ajaxNameCallPhp:{url:"phpajax/ajaxValidateFieldName.php",alertText:"* This name is already taken",alertTextLoad:"* Validating, please wait"},validate2fields:{alertText:"* Please input HELLO"},dateFormat:{regex:/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/,
alertText:"* Invalid Date"},dateTimeFormat:{regex:/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/,alertText:"* Invalid Date or Date Format",
alertText2:"Expected Format: ",alertText3:"mm/dd/yyyy hh:mm:ss AM|PM or ",alertText4:"yyyy-mm-dd hh:mm:ss AM|PM"},duplicateName:{func:function(a){return null==DataSet.find(a.val())},alertText:"*  DataSet names must not duplicate"}}}};a.validationEngineLanguage.newLang()})(jQuery);include.set_path("resources");
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var c="",b,d,e,f,g,h,k=0;for(a=Base64._utf8_encode(a);k<a.length;)b=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),f=b>>2,b=(b&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),c=c+this._keyStr.charAt(f)+this._keyStr.charAt(b)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return c},decode:function(a){var c="",b,d,e,f,g,h=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<
a.length;)b=this._keyStr.indexOf(a.charAt(h++)),d=this._keyStr.indexOf(a.charAt(h++)),f=this._keyStr.indexOf(a.charAt(h++)),g=this._keyStr.indexOf(a.charAt(h++)),b=b<<2|d>>4,d=(d&15)<<4|f>>2,e=(f&3)<<6|g,c+=String.fromCharCode(b),64!=f&&(c+=String.fromCharCode(d)),64!=g&&(c+=String.fromCharCode(e));return c=Base64._utf8_decode(c)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var c="",b=0;b<a.length;b++){var d=a.charCodeAt(b);128>d?c+=String.fromCharCode(d):(127<d&&2048>d?c+=String.fromCharCode(d>>
6|192):(c+=String.fromCharCode(d>>12|224),c+=String.fromCharCode(d>>6&63|128)),c+=String.fromCharCode(d&63|128))}return c},_utf8_decode:function(a){for(var c="",b=0,d=c1=c2=0;b<a.length;)d=a.charCodeAt(b),128>d?(c+=String.fromCharCode(d),b++):191<d&&224>d?(c2=a.charCodeAt(b+1),c+=String.fromCharCode((d&31)<<6|c2&63),b+=2):(c2=a.charCodeAt(b+1),c3=a.charCodeAt(b+2),c+=String.fromCharCode((d&15)<<12|(c2&63)<<6|c3&63),b+=3);return c}};include.set_path("resources/main");
window.noty.error=function(a){noty({text:a,type:"error",timeout:6E3})};window.noty.alert=function(a){noty({text:a,timeout:1500})};window.noty.success=function(a){noty({text:a,type:"success",timeout:1500})};include.set_path("engines/Wizard/apps");include.css("styles");include.resources("jquery.wizard");include.plugins("controller","controller/scaffold","controller/stateful","view","view/helpers","dom/element");include(function(){include.models();include.controllers("Wizard");include.views("views/Wizard/initialize")});
include.set_path("engines/Wizard/resources");
(function(a,c){var b=0,d={},e={},f=Array.prototype.slice,g=function(b){return a.isArray(b)?b:[b]};a.each(["branch","form","header","step","wrapper"],function(){d[this]="."+(e[this]="wizard-"+this)});a.widget("kf.wizard",{version:"@VERSION",options:{animations:{show:{options:{duration:0},properties:{opacity:"show"}},hide:{options:{duration:0},properties:{opacity:"hide"}}},backward:".backward",branches:".branch",disabled:!1,enableSubmit:!1,forward:".forward",header:":header:first",initialStep:0,stateAttribute:"data-state",
stepClasses:{current:"current",exclude:"exclude",stop:"stop",submit:"submit",unidirectional:"unidirectional"},steps:".step",submit:":submit",transitions:{},unidirectional:!1,afterBackward:null,afterForward:null,afterSelect:null,beforeBackward:null,beforeForward:null,beforeSelect:null},_create:function(){var c,f,l=this,p=l.options,n=l.element,m=n.find(p.steps).eq(0).parent();n[0].elements?c=n:(c=n.find("form")).length||(c=n.closest("form"));(f=n.find(p.header)).length||(f=c.find(p.header));l.elements=
{form:c.addClass(e.form),submit:c.find(p.submit),forward:c.find(p.forward),backward:c.find(p.backward),header:f.addClass(e.header),steps:n.find(p.steps).hide().addClass(e.step),branches:n.find(p.branches).add(m).addClass(e.branch),stepsWrapper:m.addClass(e.wrapper),wizard:n.addClass("wizard")};m.attr("id")||m.attr("id","wizard-"+ ++b);l.elements.forward.click(function(b){b.preventDefault();l.forward(b)});l.elements.backward.click(function(b){b.preventDefault();l.backward(b)});l._currentState={branchesActivated:[],
stepsActivated:[]};l._stepCount=l.elements.steps.length;l._lastStepIndex=l._stepCount-1;l._branchLabels=[];l.elements.steps.each(function(b){l._branchLabels[b]=a(this).parent().attr("id")});l._excludesFilter=function(){return!a(this).hasClass(p.stepClasses.exclude)};p.transitions["default"]||(p.transitions["default"]=function(b){return l.stepIndex(b.nextAll(d.step))});l.select.apply(l,g(p.initialStep))},_fastForward:function(b,d,e){var f=0,g=this,m=g._currentState.stepIndex,r=[m];a.isFunction(d)&&
(e=d,d=c);(function s(){g._transition(m,function(c,t){if(-1===(m=g.stepIndex(c,t)))throw Error('[_fastForward]: Invalid step "'+c+'"');if(0<=a.inArray(m,r))throw Error('[_fastForward]: Recursion detected on step "'+c+'"');r.push(m);m===g._lastStepIndex||(d?++f:m)===b?e.call(g,m,r):s()})})()},_find:function(b,d,e){var f,n,m,r=[],q=d instanceof jQuery?d:a(d);if(b!=c&&q.length)for(b=g(b),d=0,f=b.length;d<f;d++){var s;n=b[d];m=typeof n;"number"===m?s=q.get(n):"string"===m?s=document.getElementById(n.replace("#",
"")):"object"===m&&(n instanceof jQuery&&n.length&&(n=n[0]),n.nodeType&&q.each(function(){if(this===n)return(s=this)&&!1}));s&&r.push(s)}return!1===e?r:a(r)},_move:function(b,d,e,f,g){function m(b,d){g.call(r,b,a.isArray(f)?f:!1!==f?d:c)}var r=this,q=r._currentState;"boolean"===typeof d&&(g=f,f=e,e=d,d=c);!0===e?0<b?r._fastForward(b,e,m):g.call(r,q.stepsActivated[Math.max(0,b+(q.stepsActivated.length-1))]):-1!==(b=r.stepIndex(b,d))&&(b>q.stepIndex?r._fastForward(b,m):m.call(r,b))},_state:function(b,
c){if(!this.isValidStepIndex(b))return null;var e=a.extend(!0,{},this._currentState);c=g(c||b);e.step=this.elements.steps.eq(b);e.branch=e.step.parent();e.branchStepCount=e.branch.children(d.step).length;e.isMovingForward=b>e.stepIndex;e.stepIndexInBranch=e.branch.children(d.step).index(e.step);for(var f,n,m,r=0,q=c.length;r<q;r++)b=c[r],f=this._branchLabels[b],!e.stepIndex||e.stepIndex<b?0>a.inArray(b,e.stepsActivated)&&(e.stepsActivated.push(b),0>a.inArray(f,e.branchesActivated)&&e.branchesActivated.push(f)):
e.stepIndex>b&&(n=a.inArray(f,e.branchesActivated)+1,m=a.inArray(b,e.stepsActivated)+1,0<n&&e.branchesActivated.splice(n,e.branchesActivated.length-1),0<m&&e.stepsActivated.splice(m,e.stepsActivated.length-1)),e.stepIndex=b,e.branchLabel=f;e.stepsComplete=Math.max(0,this._find(e.stepsActivated,this.elements.steps).filter(this._excludesFilter).length-1);e.stepsPossible=Math.max(0,this._find(e.branchesActivated,this.elements.branches).children(d.step).filter(this._excludesFilter).length-1);a.extend(e,
{branchLabel:this._branchLabels[b],isFirstStep:0===b,isFirstStepInBranch:0===e.stepIndexInBranch,isLastStep:b===this._lastStepIndex,isLastStepInBranch:e.stepIndexInBranch===e.branchStepCount-1,percentComplete:100*e.stepsComplete/e.stepsPossible,stepsRemaining:e.stepsPossible-e.stepsComplete});return e},_transition:function(b,d,e){var p=this;a.isFunction(b)?(e=b,b=p._currentState.stepIndex,d=c):a.isFunction(d)&&(e=d,d=c);var n;n=p.options;b=p.step(b,d);n=(d=b.attr(n.stateAttribute))?n.transitions[d]:
n.transitions["default"];n=a.isFunction(n)?n.call(p,b,function(){return e.apply(p,f.call(arguments))}):d;n!==c&&!1!==n&&e.apply(p,g(n));return n},_update:function(b,c){var d=this._currentState,e=this.options;if(d.step){if(e.disabled||!c||c.stepIndex===d.stepIndex||!this._trigger("beforeSelect",b,c)||c.isMovingForward&&!this._trigger("beforeForward",b,c)||!c.isMovingForward&&!this._trigger("beforeBackward",b,c))return;d.step.removeClass(e.stepClasses.current).animate(e.animations.hide.properties,a.extend({},
e.animations.hide.options))}this._currentState=c;c.step.addClass(e.stepClasses.current).animate(e.animations.show.properties,a.extend({},e.animations.show.options));c.isFirstStep||e.unidirectional||c.step.hasClass(e.stepClasses.unidirectional)?this.elements.backward.attr("disabled",!0):this.elements.backward.removeAttr("disabled");c.isLastStepInBranch&&!c.step.attr(e.stateAttribute)||c.step.hasClass(e.stepClasses.stop)?this.elements.forward.attr("disabled",!0):this.elements.forward.removeAttr("disabled");
e.enableSubmit||c.step.hasClass(e.stepClasses.submit)?this.elements.submit.removeAttr("disabled"):this.elements.submit.attr("disabled",!0);d.step&&(this._trigger("afterSelect",b,c),this._trigger(c.isMovingForward?"afterForward":"afterBackward",b,c))},backward:function(b,a){"number"===typeof b?(a=b,b=c):a===c&&(a=1);this._currentState.isFirstStep||"number"!==typeof a||this._move(-a,!0,!1,function(a,c){this._update(b,this._state(a,c))})},branch:function(b){return arguments.length?this._find(b,this.elements.branches):
this._currentState.branch},branches:function(b){return arguments.length?this.branch(b).children(d.branch):this.elements.branches},branchesActivated:function(){return this._find(this._currentState.branchesActivated,this.elements.branches)},destroy:function(){var b=this.elements;this.element.removeClass("wizard");b.form.removeClass(e.form);b.header.removeClass(e.header);b.steps.show().removeClass(e.step);b.stepsWrapper.removeClass(e.wrapper);b.branches.removeClass(e.branch);a.Widget.prototype.destroy.call(this)},
form:function(){return this.elements.form},forward:function(b,a,d){"number"===typeof b?(d=a,a=b,b=c):a===c&&(a=1);this._currentState.isLastStep||"number"!==typeof a||this._move(a,!0,d,function(a,c){this._update(b,this._state(a,c))})},isValidStep:function(b,a){return this.isValidStepIndex(this.stepIndex(b,a))},isValidStepIndex:function(b){return"number"===typeof b&&0<=b&&b<=this._lastStepIndex},length:function(){return this._stepCount},select:function(b,d,e,f,g){b instanceof a.Event||(g=f,f=e,e=d,
d=b,b=c);d!=c&&(a.isArray(d)?(g=f,f=e,e=d[1],d=d[0]):"boolean"===typeof e?(g=f,f=e,e=c):a.isArray(e)&&(g=e,e=c),this._move(d,e,f,g,function(a,c){this._update(b,this._state(a,c))}))},state:function(b,d,e){if(!arguments.length)return this._currentState;a.isArray(b)?(e=d,d=b[1],b=b[0]):a.isArray(d)&&(e=d,d=c);return this._state(this.stepIndex(b,d),e)},step:function(b,d){if(!arguments.length)return this._currentState.step;a.isArray(b)&&(d=b[1],b=b[0]);var f;"number"===typeof b?f=this._find(b,d!==c?this.steps(d):
this.elements.steps):(f=this._find(b,this.elements.steps.add(this.elements.branches)))&&f.hasClass(e.branch)&&(f=this._find(d||0,this.steps(f)));return f},stepIndex:function(b,e,f){if(!arguments.length)return this._currentState.stepIndex;var g;a.isArray(b)?(f=e,e=b[1],b=b[0]):"boolean"===typeof e&&(f=e,e=c);return(g=this.step(b,e))?(f?g.siblings(d.step).andSelf():this.elements.steps).index(g):-1},steps:function(b){return arguments.length?this.branch(b).children(d.step):this.elements.steps},stepsActivated:function(){return this._find(this._currentState.stepsActivated,
this.elements.steps)},submit:function(){this.elements.form.submit()}})})(jQuery);include.set_path("jmvc/plugins/controller");include.plugins("lang","lang/inflector","dom/event","lang/class","lang/openajax","dom/data");include("delegator","controller");MVC.View&&include.plugins("controller/view");include.set_path("jmvc/plugins/lang");include({path:"standard_helpers.js",shrink_variables:!1});include.set_path("jmvc/plugins/lang");MVC.String={};
MVC.String.strip=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")};MVC.Function={};MVC.Function.params=function(a){a=a.toString().match(/^[\s\(]*function[^(]*\((.*?)\)/)[1].split(",");if(1==a.length&&!a[0])return[];for(var c=0;c<a.length;c++)a[c]=MVC.String.strip(a[c]);return a};MVC.Native={};
MVC.Native.extend=function(a,c){MVC[a]||(MVC[a]={});var b=MVC[a],d;for(d in c)b[d]=c[d],MVC._no_conflict||(window[a][d]=c[d],"function"==typeof c[d]&&0!=MVC.Function.params(c[d]).length&&MVC.Native.set_prototype(a,d,c[d]))};MVC.Native.set_prototype=function(a,c,b){b||(b=MVC[a][c]);window[a].prototype[c]=function(){for(var a=[this],c=0,f=arguments.length;c<f;c++)a.push(arguments[c]);return b.apply(this,a)}};MVC.Native.Object={};MVC.Native.Object.extend=function(a,c){for(var b in c)a[b]=c[b];return a};
MVC.Native.Object.to_query_string=function(a,c){return"object"!=typeof a?a:MVC.Native.Object.to_query_string.worker(a,c).join("&")};
MVC.Native.Object.to_query_string.worker=function(a,c){var b=[],d;for(d in a)if(a.hasOwnProperty(d)){var e=a[d];e&&e.constructor===Date&&(e=e.getUTCFullYear()+"-"+MVC.Number.to_padded_string(e.getUTCMonth()+1,2)+"-"+MVC.Number.to_padded_string(e.getUTCDate(),2)+" "+MVC.Number.to_padded_string(e.getUTCHours(),2)+":"+MVC.Number.to_padded_string(e.getUTCMinutes(),2)+":"+MVC.Number.to_padded_string(e.getUTCSeconds(),2));if(e instanceof Array&&e.length)for(var f=encodeURIComponent(c?c+"["+d+"]":d),g=0;g<
e.length;g++){var h=encodeURIComponent(e[g].toString());b.push(f+"="+h)}else e&&"object"!=typeof e?(h=encodeURIComponent(e.toString()),f=encodeURIComponent(c?c+"["+d+"]":d),b.push(f+"="+h)):b=b.concat(MVC.Native.Object.to_query_string.worker(e,c?c+"["+d+"]":d))}return b};
MVC.Native.extend("String",{capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()},include:function(a,c){return-1<a.indexOf(c)},ends_with:function(a,c){var b=a.length-c.length;return 0<=b&&a.lastIndexOf(c)===b},camelize:function(a){a=a.split(/_|-/);for(var c=1;c<a.length;c++)a[c]=MVC.String.capitalize(a[c]);return a.join("")},classize:function(a){a=a.split(/_|-/);for(var c=0;c<a.length;c++)a[c]=MVC.String.capitalize(a[c]);return a.join("")},strip:MVC.String.strip});
MVC.Native.extend("Array",{include:function(a,c){for(var b=0;b<a.length;b++)if(a[b]==c)return!0;return!1},remove:function(a,c){for(var b=[],d=0,e=a.length;d<e;++d)"function"==typeof c&&c(a[d])||a[d]!=c&&b.push(a[d]);return b}});MVC.Array.from=function(a){if(!a)return[];for(var c=[],b=0,d=a.length;b<d;b++)c.push(a[b]);return c};MVC.Array.is=function(a){return"[object Array]"===Object.prototype.toString.call(a)};
MVC.Array.last=function(){if(0==this.length)throw"Array: querying zero length array";return 1==this.length?this[0]:this[this.length-1]};MVC.Array.first=function(){if(0==this.length)throw"Array: querying zero length array";return this[0]};MVC.Array.findFirst=function(a){if(0==this.length)throw"Array: querying zero length array";if(1==this.length)return this[0];for(var c=0;c<this.length;++c)if(a(this[c],c))return this[c];return this.last()};
MVC.Array.binarySearch=function(a,c){for(var b=0,d=this.length-1,e,f;b<=d;)if(e=Math.floor((b+d)/2),f=c(this[e],e,a),0>f)b=e+1;else if(0<f)d=e-1;else return this[e];return null};MVC.Native.extend("Function",{bind:function(a,c){var b=MVC.Array.from(arguments);b.shift();b.shift();var d=a,e=arguments[1];return function(){return d.apply(e,b.concat(MVC.Array.from(arguments)))}},params:MVC.Function.params});
MVC.Native.extend("Number",{to_padded_string:function(a,c,b){a=a.toString(b||10);b="";c-=a.length;for(var d=0;d<c;d++)b+="0";return b+a}});MVC.Native.Array=MVC.Array;MVC.Native.Function=MVC.Function;MVC.Native.Number=MVC.Number;MVC.Native.String=MVC.String;MVC.Object=MVC.Native.Object;MVC._no_conflict||(Array.from=MVC.Array.from,Array.last=MVC.Array.last,Array.first=MVC.Array.first,Array.findFirst=MVC.Array.findFirst,Array.binarySearch=MVC.Array.binarySearch);include.set_path("jmvc/plugins/lang/inflector");
include.plugins("lang");include("inflector");include.set_path("jmvc/plugins/lang/inflector");
MVC.Inflector={Inflections:{plural:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/s$/i,"s"],[/$/,"s"]],singular:[[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,
"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],
[/(n)ews$/i,"$1ews"],[/s$/i,""]],irregular:[["move","moves"],["sex","sexes"],["child","children"],["man","men"],["foreman","foremen"],["person","people"]],uncountable:"sheep fish series species money rice information equipment".split(" ")},pluralize:function(a){for(var c=0;c<MVC.Inflector.Inflections.uncountable.length;c++){var b=MVC.Inflector.Inflections.uncountable[c];if(a.toLowerCase()==b)return b}for(c=0;c<MVC.Inflector.Inflections.irregular.length;c++){var b=MVC.Inflector.Inflections.irregular[c][0],
d=MVC.Inflector.Inflections.irregular[c][1];if(a.toLowerCase()==b||a==d)return a.substring(0,1)+d.substring(1)}for(c=0;c<MVC.Inflector.Inflections.plural.length;c++)if(b=MVC.Inflector.Inflections.plural[c][0],d=MVC.Inflector.Inflections.plural[c][1],b.test(a))return a.replace(b,d)},singularize:function(a){for(var c=0;c<MVC.Inflector.Inflections.uncountable.length;c++){var b=MVC.Inflector.Inflections.uncountable[c];if(a.toLowerCase()==b)return b}for(c=0;c<MVC.Inflector.Inflections.irregular.length;c++){var b=
MVC.Inflector.Inflections.irregular[c][0],d=MVC.Inflector.Inflections.irregular[c][1];if(a.toLowerCase()==b||a.toLowerCase()==d)return a.substring(0,1)+b.substring(1)}for(c=0;c<MVC.Inflector.Inflections.singular.length;c++)if(b=MVC.Inflector.Inflections.singular[c][0],d=MVC.Inflector.Inflections.singular[c][1],b.test(a))return a.replace(b,d)}};
MVC.Native.extend("String",{pluralize:function(a,c,b){return"undefined"==typeof c?MVC.Inflector.pluralize(a):c+" "+(1==parseInt(c)?a:b||MVC.Inflector.pluralize(a))},singularize:function(a,c){return"undefined"==typeof c?MVC.Inflector.singularize(a):c+" "+MVC.Inflector.singularize(a)},is_singular:function(a){return null==MVC.String.singularize(a)&&a?!0:!1}});include.set_path("jmvc/plugins/dom/event");"undefined"==typeof Prototype?include("standard"):include("prototype_event");include.set_path("jmvc/plugins/dom/event");
document.addEventListener?MVC.Event={observe:function(a,c,b,d){null==d&&(d=!1);a.addEventListener(c,b,d)},stop_observing:function(a,c,b,d){a.removeEventListener(c,b,!1)}}:document.attachEvent&&(MVC.Event={observe:function(a,c,b){if(-1==MVC.Event._find(a,c,b)){var d=function(d){d||(d=window.event);d={_event:d,type:d.type,target:d.srcElement,currentTarget:a,relatedTarget:"mouseover"==c?d.fromElement:d.toElement,eventPhase:d.srcElement==a?2:3,clientX:d.clientX,clientY:d.clientY,screenX:d.screenX,screenY:d.screenY,
altKey:d.altKey,ctrlKey:d.ctrlKey,shiftKey:d.shiftKey,charCode:d.keyCode,stopPropagation:function(){this._event.cancelBubble=!0},preventDefault:function(){this._event.returnValue=!1},which:d.which||(d.button&1?1:d.button&2?3:d.button&4?2:0)};Function.prototype.call?b.call(a,d):(a._currentHandler=b,a._currentHandler(d),a._currentHandler=null)};a.attachEvent("on"+c,d);var d={element:a,eventType:c,handler:b,wrappedHandler:d},e=(a.document||a).parentWindow,f=MVC.Event._uid();e._allHandlers||(e._allHandlers=
{});e._allHandlers[f]=d;a._handlers||(a._handlers=[]);a._handlers.push(f);e._onunloadHandlerRegistered||(e._onunloadHandlerRegistered=!0,e.attachEvent("onunload",MVC.Event._removeAllHandlers))}},stop_observing:function(a,c,b){b=MVC.Event._find(a,c,b);if(-1!=b){var d=(a.document||a).parentWindow,e=a._handlers[b];a.detachEvent("on"+c,d._allHandlers[e].wrappedHandler);a._handlers.splice(b,1);delete d._allHandlers[e]}},_find:function(a,c,b){var d=a._handlers;if(!d)return-1;a=(a.document||a).parentWindow;
for(var e=d.length-1;0<=e;e--){var f=a._allHandlers[d[e]];if(f.eventType==c&&f.handler==b)return e}return-1},_removeAllHandlers:function(){for(var a in this._allHandlers)if(this._allHandlers.hasOwnProperty(a)){var c=this._allHandlers[a];c.element&&c.element.detachEvent("on"+c.eventType,c.wrappedHandler);delete this._allHandlers[a]}},_counter:0,_uid:function(){return"h"+MVC.Event._counter++}});MVC._no_conflict||"undefined"!=typeof Event||(Event=MVC.Event);include.set_path("jmvc/plugins/lang/class");
(function(){var a=!1,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;MVC.Class=function(){};MVC.Class.extend=function(b,d,e){function f(){!a&&this.init&&this.init.apply(this,arguments)}"string"!=typeof b&&(e=d,d=b,b=null);e||(e=d,d=null);e=e||{};var g=this,h=this.prototype;a=!0;var k=new this;a=!1;for(var l in e)k[l]="function"==typeof e[l]&&"function"==typeof h[l]&&c.test(e[l])?function(b,a){return function(){var c=this._super;this._super=h[b];var d=a.apply(this,arguments);this._super=c;return d}}(l,
e[l]):e[l];f.prototype=k;f.prototype.Class=f;f.constructor=f;for(l in this)this.hasOwnProperty(l)&&"prototype"!=l&&(f[l]=this[l]);for(l in d)f[l]="function"==typeof d[l]&&"function"==typeof f[l]&&c.test(d[l])?function(b,a){return function(){var c=this._super;this._super=g[b];var d=a.apply(this,arguments);this._super=c;return d}}(l,d[l]):d[l];f.extend=arguments.callee;b&&(f.className=b);f.init&&f.init(f);g.extended&&g.extended(f);return f}})();MVC._no_conflict||"undefined"!=typeof Class||(Class=MVC.Class);
include.set_path("jmvc/plugins/lang/openajax");
window.OpenAjax||(OpenAjax=new function(){var a={};this.hub=a;a.implementer="http://openajax.org";a.implVersion="1.0";a.specVersion="1.0";a.implExtraData={};var c={};a.libraries=c;a.registerLibrary=function(b,a,e,f){c[b]={prefix:b,namespaceURI:a,version:e,extraData:f};this.publish("org.openajax.hub.registerLibrary",c[b])};a.unregisterLibrary=function(b){this.publish("org.openajax.hub.unregisterLibrary",c[b]);delete c[b]};a._subscriptions={c:{},s:[]};a._cleanup=[];a._subIndex=0;a._pubDepth=0;a.subscribe=
function(b,a,c,f,g){c||(c=window);var h=b+"."+this._subIndex;a={scope:c,cb:a,fcb:g,data:f,sid:this._subIndex++,hdl:h};b=b.split(".");this._subscribe(this._subscriptions,b,0,a);return h};a.publish=function(b,a){var c=b.split(".");this._pubDepth++;this._publish(this._subscriptions,c,0,b,a);this._pubDepth--;if(0<this._cleanup.length&&0==this._pubDepth){for(c=0;c<this._cleanup.length;c++)this.unsubscribe(this._cleanup[c].hdl);delete this._cleanup;this._cleanup=[]}};a.unsubscribe=function(b){b=b.split(".");
var a=b.pop();this._unsubscribe(this._subscriptions,b,0,a)};a._subscribe=function(b,a,c,f){var g=a[c];c==a.length?b.s.push(f):("undefined"==typeof b.c&&(b.c={}),"undefined"==typeof b.c[g]&&(b.c[g]={c:{},s:[]}),this._subscribe(b.c[g],a,c+1,f))};a._publish=function(b,a,c,f,g,h,k){if("undefined"!=typeof b&&(c!=a.length&&(this._publish(b.c[a[c]],a,c+1,f,g,h,k),this._publish(b.c["*"],a,c+1,f,g,h,k),b=b.c["**"]),"undefined"!=typeof b))for(b=b.s,a=b.length,c=0;c<a;c++)if(b[c].cb){var l=b[c].scope,p=b[c].cb,
n=b[c].fcb,m=b[c].data,r=b[c].sid,q=b[c].cid;"string"==typeof p&&(p=l[p]);"string"==typeof n&&(n=l[n]);if(!n||n.call(l,f,g,m))h&&!h(f,g,k,q)||p.call(l,f,g,m,r)}};a._unsubscribe=function(b,a,c,f){if("undefined"!=typeof b)if(c<a.length){var g=b.c[a[c]];this._unsubscribe(g,a,c+1,f);if(0==g.s.length){for(var h in g.c)return;delete b.c[a[c]]}}else for(b=b.s,a=b.length,c=0;c<a;c++)if(f==b[c].sid){0<this._pubDepth?(b[c].cb=null,this._cleanup.push(b[c])):b.splice(c,1);break}};a.reinit=function(){for(var b in OpenAjax.hub.libraries)delete OpenAjax.hub.libraries[b];
OpenAjax.hub.registerLibrary("OpenAjax","http://openajax.org/hub","1.0",{});delete OpenAjax._subscriptions;OpenAjax._subscriptions={c:{},s:[]};delete OpenAjax._cleanup;OpenAjax._cleanup=[];OpenAjax._subIndex=0;OpenAjax._pubDepth=0}},OpenAjax.hub.registerLibrary("OpenAjax","http://openajax.org/hub","1.0",{}));OpenAjax.hub.registerLibrary("JavaScriptMVC","http://JavaScriptMVC.com","1.5",{});include.set_path("jmvc/plugins/dom/data");
MVC.Dom={data:function(a,c,b){a=a==window?windowData:a;a.__mvc||(a.__mvc={});void 0!==b&&(a.__mvc[c]=b);return c?a.__mvc[c]:a.__mvc},remove_data:function(a,c){a=a==window?windowData:a;var b=a.__mvc;if(c){if(b){delete b[c];c="";for(c in b)break;c||MVC.Dom.remove_data(a)}}else try{delete a.__mvc}catch(d){a.removeAttribute&&a.removeAttribute("__jmvc")}}};include.set_path("jmvc/plugins/controller");
MVC.Delegator=function(a,c,b,d){this._event=c;this._selector=a;this._func=b;this.element=d||document.documentElement;MVC.Delegator.jmvc(this.element);if("contextmenu"==c&&MVC.Browser.Opera)return this.context_for_opera();if("submit"==c&&MVC.Browser.IE)return this.submit_for_ie();if("change"==c&&MVC.Browser.IE)return this.change_for_ie();if("change"==c&&MVC.Browser.WebKit)return this.change_for_webkit();this.add_to_delegator()};
MVC.Object.extend(MVC.Delegator,{jmvc:function(a){a=MVC.Dom.data(a);a.delegation_events||(a.delegation_events={});null==a.responding&&(a.responding=!0);return a},add_kill_event:function(a){if(!a.kill){a||(a=window.event);var c=!1;a.kill=function(){c=!0;try{a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}catch(b){}};a.is_killed=function(){return c};a.stop_propagation=function(){c=!0;try{a.stopPropagation&&a.stopPropagation()}catch(b){}};a.prevent_default=function(){try{a.preventDefault&&
a.preventDefault()}catch(b){}}}},sort_by_order:function(a,c){if(a.order<c.order)return 1;if(c.order<a.order)return-1;var b=a._event,d=c._event;return"click"==b&&"change"==d?1:"click"==d&&"change"==b?-1:0},events:{},onload_called:!1});MVC.Event.observe(window,"load",function(){MVC.Delegator.onload_called=!0});
MVC.Delegator.prototype={event:function(){if(MVC.Browser.IE){if("focus"==this._event)return"activate";if("blur"==this._event)return"deactivate"}return this._event},capture:function(){return MVC.Array.include(["focus","blur"],this._event)},add_to_delegator:function(a,c,b){a=c||this.event();c=MVC.Dom.data(this.element,"delegation_events");c[a]&&0!=c[a].length||(b=MVC.Function.bind(this.dispatch_event,this),MVC.Event.observe(this.element,a,b,this.capture()),c[a]=[],c[a]._bind_function=b);c[a].push(this)},
_remove_from_delegator:function(a){a=a||this.event();for(var c=MVC.Dom.data(this.element,"delegation_events")[a],b=0;b<c.length;b++)if(c[b]==this){c.splice(b,1);break}0==c.length&&MVC.Event.stop_observing(this.element,a,c._bind_function,this.capture())},submit_for_ie:function(){this.add_to_delegator(null,"click");this.add_to_delegator(null,"keypress");this.filters={click:function(a,c,b){if("INPUT"==a.nodeName.toUpperCase()&&"submit"==a.type.toLowerCase())for(a=0;a<b.length;a++)if("FORM"==b[a].tag)return!0;
return!1},keypress:function(a,c,b){if("INPUT"!=a.nodeName.toUpperCase())return!1;if("undefined"!=typeof Prototype?13==c.keyCode:13==c.charCode)for(a=0;a<b.length;a++)if("FORM"==b[a].tag)return!0;return!1}}},change_for_ie:function(){this.add_to_delegator(null,"click");this.add_to_delegator(null,"keyup");this.add_to_delegator(null,"beforeactivate");this.end_filters={click:function(a,c){switch(a.nodeName.toLowerCase()){case "select":if("undefined"==typeof a.selectedIndex)break;var b=MVC.Dom.data(a);
if(null==b._change_old_value){b._change_old_value=a.selectedIndex.toString();break}else{if(b._change_old_value==a.selectedIndex.toString())break;b._change_old_value=a.selectedIndex.toString();return!0}case "input":if("checkbox"==a.type.toLowerCase())return!0}return!1},keyup:function(a,c){if("select"!=a.nodeName.toLowerCase()||"undefined"==typeof a.selectedIndex)return!1;var b=MVC.Dom.data(a);if(null==b._change_old_value)return b._change_old_value=a.selectedIndex.toString(),!1;if(b._change_old_value==
a.selectedIndex.toString())return!1;b._change_old_value=a.selectedIndex.toString();return!0},beforeactivate:function(a,c){return"input"==a.nodeName.toLowerCase()&&"radio"==a.type.toLowerCase()&&!a.checked&&MVC.Delegator.onload_called}}},change_for_webkit:function(){this.add_to_delegator(null,"change");this.end_filters={change:function(a,c){if("input"==a.nodeName.toLowerCase())return!0;if("undefined"==typeof a.value)return!1;var b=a.getAttribute("_old_value");a.setAttribute("_old_value",a.value);return a.value!=
b}}},context_for_opera:function(){this.add_to_delegator(null,"click");this.end_filters={click:function(a,c){return c.shiftKey}}},regexp_patterns:{tag:/^\s*(\*|[\w\-]+)(\b|$)?/,id:/^#([\w\-\*]+)(\b|$)/,className:/^\.([\w\-\*]+)(\b|$)/},selector_order:function(){if(this.order)return this.order;var a=this._selector.split(/\s+/),c=this.regexp_patterns,b=[];if(this._selector)for(var d=0;d<a.length;d++){var e={},f,g=a[d],h;for(h in c)c.hasOwnProperty(h)&&(f=g.match(c[h]))&&(e[h]="tag"==h?f[1].toUpperCase():
f[1],g=g.replace(f[0],""));b.push(e)}return this.order=b},match:function(a,c,b){if(this.filters&&!this.filters[c.type](a,c,b))return null;var d=0,e=this.selector_order();if(0==e.length)return{node:b[0].element,order:0,delegation_event:this};for(var f=0;f<b.length;f++){var g=b[f],h=e[d],k=!0,l;for(l in h)h.hasOwnProperty(l)&&"element"!=l&&(h[l]&&"className"==l?MVC.Array.include(g.className.split(" "),h[l])||(k=!1):h[l]&&g[l]!=h[l]&&(k=!1));if(k&&(d++,d>=e.length)){if(this.end_filters&&!this.end_filters[c.type](a,
c))break;return{node:g.element,order:f,delegation_event:this}}}return null},dispatch_event:function(a){for(var c=a.target,b=!0,d=[],e=MVC.Dom.data(this.element,"delegation_events")[a.type],f=this.node_path(c),g=0;g<e.length;g++){var h=e[g].match(c,a,f);h&&d.push(h)}if(0==d.length)return!0;MVC.Delegator.add_kill_event(a);d.sort(MVC.Delegator.sort_by_order);for(e=0;e<d.length;e++)if(c=d[e],b=c.delegation_event._func({event:a,element:MVC.$E(c.node),delegate:this.element})&&b,a.is_killed())return!1},
node_path:function(a){var c=this.element,b=[];if(a==c)return[{tag:a.nodeName,className:a.className,id:a.id,element:a}];do b.unshift({tag:a.nodeName,className:a.className,id:a.id,element:a});while((a=a.parentNode)!=c&&a);a&&b.unshift({tag:a.nodeName,className:a.className,id:a.id,element:a});return b},destroy:function(){if("contextmenu"==this._event&&MVC.Browser.Opera)return this._remove_from_delegator("click");if("submit"==this._event&&MVC.Browser.IE)return this._remove_from_delegator("keypress"),
this._remove_from_delegator("click");if("change"==this._event&&MVC.Browser.IE)return this._remove_from_delegator("keyup"),this._remove_from_delegator("beforeactivate"),this._remove_from_delegator("click");this._remove_from_delegator()}};include.set_path("jmvc/plugins/controller");MVC.Object.is_number=function(a){return a&&("number"==typeof a||"string"==typeof a&&!isNaN(a))};
MVC.Controller=MVC.Class.extend({init:function(){if(this.className){this.singularName=MVC.String.singularize(this.className);MVC.Controller.controllers[this.className]||(MVC.Controller.controllers[this.className]=[]);MVC.Controller.controllers[this.className].unshift(this);this.modelName||(this.modelName=MVC.String.is_singular(this.className)?this.className:MVC.String.singularize(this.className));this._should_attach_actions&&this._create_actions();if("test"==include.get_env()){var a=MVC.root.join("test/functional/"+
this.className+"_controller_test.js");include.check_exists(a)?(MVC.Console.log('Loading: "test/functional/'+this.className+'_controller_test.js"'),include("../test/functional/"+this.className+"_controller_test.js")):MVC.Console.log('Test Controller not found at "test/functional/'+this.className+'_controller_test.js"')}this._path=include.get_path().match(/(.*?)controllers/)[1]+"controllers"}},_should_attach_actions:!0,_create_actions:function(){this.actions={};for(var a in this.prototype)if(val=this.prototype[a],
"function"==typeof val&&"Class"!=a)for(var c=0;c<MVC.Controller.actions.length;c++)if(act=MVC.Controller.actions[c],act.matches(a)){var b=this.dispatch_closure(a);this.actions[a]=new act(a,b,this.className,this._element,this._events)}},dispatch_closure:function(a){return MVC.Function.bind(function(c){c=c||{};c.action=a;c.controller=this;c=c.constructor==MVC.Controller.Params?c:new MVC.Controller.Params(c);return this.dispatch(a,c)},this)},dispatch:function(a,c){a||(a="index");if("string"==typeof a){if(!(a in
this.prototype))throw"No action named "+a+" was found for "+this.Class.className+" controller.";}else a=a.name;var b=this._get_instance(a,c);return this._dispatch_action(b,a,c)},_get_instance:function(a,c){return new this(a,c)},_dispatch_action:function(a,c,b){if(this._listening)return a.params=b,a.action_name=c,a[c](b)},controllers:{},actions:[],publish:function(a,c){OpenAjax.hub.publish(a,c)},get_controller_with_name_and_action:function(a,c){var b=MVC.Controller.controllers[a];if(!b)return null;
for(var d=0;d<b.length;d++){var e=b[d];if(e.prototype[c])return e}return null},modelName:null,_listening:!0,_events:MVC.Delegator.events,_element:document.documentElement},{continue_to:function(a){var c=MVC.Array.from(arguments);a=c.shift();if("function"!=typeof this[a])throw"There is no action named "+a+". ";return MVC.Function.bind(function(){this.action_name=a;this[a].apply(this,c.concat(MVC.Array.from(arguments)))},this)},delay:function(a,c,b){if("function"!=typeof this[c])throw"There is no action named "+
c+". ";return setTimeout(MVC.Function.bind(function(){this.Class._dispatch_action(this,c,b)},this),a)},publish:function(a,c){this.Class.publish(a,c)}});MVC.Controller.Action=MVC.Class.extend({init:function(){this.matches&&MVC.Controller.actions.push(this)}},{init:function(a,c,b,d){this.action=a;this.callback=c;this.className=b;this.element=d},destroy:function(){}});
MVC.Controller.Action.Subscribe=MVC.Controller.Action.extend({match:/(.*?)\s?(subscribe)$/,matches:function(a){return this.match.exec(a)}},{init:function(a,c,b,d){this._super(a,c,b,d);this.message();this.subscription=OpenAjax.hub.subscribe(this.message_name,MVC.Function.bind(this.subscribe,this))},message:function(){this.parts=this.action.match(this.Class.match);this.message_name=this.parts[1]},subscribe:function(a,c){var b=c||{};b.event_name=a;this.callback(b)},destroy:function(){OpenAjax.hub.unsubscribe(this.subscription);
this._super()}});
MVC.Controller.Action.Event=MVC.Controller.Action.extend({match:/^(?:(.*?)\s)?(change|click|contextmenu|dblclick|keydown|keyup|keypress|mousedown|mousemove|mouseout|mouseover|mouseup|reset|resize|scroll|select|submit|dblclick|focus|blur|load|unload)$/,matches:function(a){return this.match.exec(a)}},{init:function(a,c,b,d){this._super(a,c,b,d);this.css_and_event();a=this.selector();null!=a&&(this.delegator=new MVC.Delegator(a,this.event_type,c,d))},css_and_event:function(){this.parts=this.action.match(this.Class.match);
this.css=this.parts[1]||"";this.event_type=this.parts[2]},main_controller:function(){if(!this.css&&MVC.Array.include(["blur","focus"],this.event_type))MVC.Event.observe(window,this.event_type,MVC.Function.bind(function(a){this.callback({event:a,element:window})},this));else return this.css},plural_selector:function(){if("#"==this.css||"# "==this.css.substring(0,2)){var a=this.css.substring(2,this.css.length);return this.element==document.documentElement?"#"+this.className+(a?" "+a:""):a?" "+a:""}return"."+
MVC.String.singularize(this.className)+(this.css?" "+this.css:"")},singular_selector:function(){return this.element==document.documentElement?"#"+this.className+(this.css?" "+this.css:""):this.css},selector:function(){if(MVC.Array.include(["load","unload","resize","scroll"],this.event_type))MVC.Event.observe(window,this.event_type,MVC.Function.bind(function(a){this.callback({event:a,element:window})},this));else return this.css_selector="main"==this.className?this.main_controller():MVC.String.is_singular(this.className)?
this.singular_selector():this.plural_selector()},destroy:function(){this.delegator&&this.delegator.destroy();this._super()}});MVC.Controller.Params=function(a){a=a||{};var c=!1;this.kill=function(){c=!0;a.event&&a.event.kill&&a.event.kill()};this.is_killed=function(){return a.event.is_killed?a.event.is_killed():c};for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.constructor=MVC.Controller.Params};
MVC.Controller.Params.prototype={form_params:function(){var a={};if("form"!=this.element.nodeName.toLowerCase())return a;for(var c=this.element.elements,b=0;b<c.length;b++){var d=c[b];if("submit"!=d.type.toLowerCase()){var e=d.name||d.id,f=e.match(/(\w+)/g);if(e){switch(d.type.toLowerCase()){case "checkbox":case "radio":d=!!d.checked;break;default:d=d.value}if(1<f.length){var e=f.length-1,g=f[0].toString();a[g]||(a[g]={});for(var h=a[g],k=1;k<e;k++)g=f[k],h[g]||(h[g]={}),h=h[g];h[f[e]]=d}else e in
a?("string"==typeof a[e]&&(a[e]=[a[e]]),a[e].push(d)):a[e]=d}}}return a},class_element:function(){for(var a=this.element,c=this._className(),b=function(b){b=b.className.split(" ");for(var a=0;a<b.length;a++)if(b[a]==c)return!0;return!1};a&&!b(a);)if(a=a.parentNode,a==document)return null;return MVC.$E(a)},is_event_on_element:function(){return this.event.target==this.element},_className:function(){return this.controller.singularName},element_instance:function(){var a,c,b=this.controller.modelName;
if(!(c=MVC.Model.models[b]))throw"No model for the "+this.controller.className+" controller!";a=this.class_element();return Model._find_by_element(a,b,c)}};MVC._no_conflict||"undefined"!=typeof Controller||(Controller=MVC.Controller);include.set_path("jmvc/plugins/controller/scaffold");include.plugins("model/view_helper");include("scaffold");include.set_path("jmvc/plugins/model/view_helper");include("model_view_helper");include.set_path("jmvc/plugins/model/view_helper");
MVC.ModelViewHelper=MVC.Class.extend({init:function(){if(this.className&&this.className){if(!(this.modelClass=window[MVC.String.classize(this.className)]))throw"ModelViewHelpers can't find class "+this.className;var a=this;this.modelClass.View=function(){return a};this.modelClass.prototype.View=function(){return new a(this)};if(this.modelClass.attributes){this._view=new MVC.View.Helpers({});for(var c in this.modelClass.attributes)this.modelClass.attributes.hasOwnProperty(c)&&"string"==typeof this.modelClass.attributes[c]&&
this.add_helper(c)}}},form_helper:function(a){!this.helpers[a]+"_field"&&this.add_helper(a);var c=this.helpers[a+"_field"],b=MVC.Array.from(arguments);b.shift();return c.apply(this._view,b)},add_helper:function(a){var c=this._helper(a);this.helpers[a+"_field"]=c},helpers:{},_helper:function(a){var c=this._view_helper(a),b=this,d=this.modelClass.className+"["+a+"]",e=this.modelClass.className+"_"+a;return function(){var a=MVC.Array.from(arguments);a.unshift(d);a[2]=a[2]||{};a[2].id=e;return c.apply(b._view,
a)}},_view_helper:function(a){switch(this.modelClass.attributes[a].toLowerCase()){case "boolean":return this._view.check_box_tag;case "text":return this._view.text_area_tag;default:return this._view.text_field_tag}},clear:function(){var a=this.modelClass.className,c,b;for(b in this.modelClass.attributes)if(c=MVC.$E(a+"_"+b))c.value=""},from_html:function(a){a=MVC.$E(a);var c=this.modelClass?this.modelClass:window[MVC.String.classize(a.getAttribute("type"))];if(!c)return null;var b={};b[c.id]=this.element_id_to_id(a.id);
return c.create_as_existing(b)},element_id_to_id:function(a){return a.replace(new RegExp(this.className+"_",""),"")}},{init:function(a){this._inst=a;this._className=this._inst.Class.className;this._Class=this._inst.Class},id:function(){return this._inst[this._inst.Class.id]},element:function(){if(this._element||(this._element=MVC.$E(this.element_id())))return this._element},create_element:function(){this._element=document.createElement("div");this._element.id=this.element_id();this._element.className=
this._className;this._element.setAttribute("type",this._className);return this._element},element_id:function(){return this._className+"_"+this._inst[this._inst.Class.id]},show_errors:function(){for(var a=MVC.$E(this._className+"_error"),a=a||MVC.$E(this._className+"_error"),c=[],b=0;b<this._inst.errors.length;b++){var d=this._inst.errors[b],e=MVC.$E(this._className+"_"+d[0]);if(e){if(e.className="error",e=MVC.$E(this._className+"_"+d[0]+"_error"))e.innerHTML=d[1]}else c.push(d[0]+" is "+d[1])}0<c.length&&
(a?a.innerHTML=c.join(", "):alert(c.join(", ")))},clear_errors:function(){var a=this._className,c;for(c in this._Class.attributes)if(this._Class.attributes.hasOwnProperty(c)){var b=MVC.$E(a+"_undefined");b&&(b.className=b.className.replace(/(^|\\s+)error(\\s+|$)/," "));if(b=MVC.$E(a+"_"+c+"_error"))b.innerHTML="&nbsp;"}if(a=MVC.$E(a+"_error"))a.innerHTML=""},edit:function(a){var c=MVC.Array.from(arguments),b=this._className+"["+a+"]";c.shift();c.unshift({id:this.edit_id(a)});c.unshift(this._inst[a]);
c.unshift(b);return this.Class._view_helper(a).apply(this.Class._view,c)},edit_values:function(){var a={},c,b;for(b in this._Class.attributes)this._Class.attributes.hasOwnProperty(b)&&(c=MVC.$E(this.edit_id(b))),c&&(a[b]=c.value);return a},edit_id:function(a){return this._className+"_"+this._inst.id+"_"+a+"_edit"},destroy:function(){var a=this.element();a.parentNode.removeChild(a)}});include.set_path("jmvc/plugins/controller/scaffold");
MVC.Controller.scaffold=function(){if(this.className){var a=MVC.String.singularize(MVC.String.classize(this.className));this.scaffold_model=window[a];this.singular_name=MVC.String.singularize(this.className);for(var c in MVC.Controller.scaffold.functions)this.prototype[c]||(this.prototype[c]=MVC.Controller.scaffold.functions[c]);this.scaffold_view_helper=window[a+"ViewHelper"]?window[a+"ViewHelper"]:window[a+"ViewHelper"]=MVC.ModelViewHelper.extend(this.singular_name)}};
MVC.Controller.scaffold.functions={load:function(a){MVC.$E(this.Class.className)||(a=document.createElement("div"),a.id=this.Class.className,document.body.appendChild(a));this.Class.scaffold_model.find("all",{},this.continue_to("list"))},list:function(a){this.singular_name=this.Class.singular_name;this[this.Class.className]=a;this.controller_name=this.Class.className;this.objects=a;this.render({to:this.Class.className,plugin:"controller/scaffold/display",action:this.Class.className})},"# form submit":function(a){a.event.kill();
this.Class.scaffold_model.create(a.form_params()[this.Class.singular_name],this.continue_to("created"))},created:function(a){0<a.errors.length?a.View().show_errors():(this.Class.scaffold_model.View().clear(),a.View().clear_errors(),this[this.Class.className]=[a],this.objects=[a],this.singular_name=this.Class.singular_name,this.render({bottom:"recipe_list",plugin:"controller/scaffold/list",action:"list"}))},".delete click":function(a){this[this.Class.singular_name]=a.element_instance();confirm("Are you sure you want to delete")&&
this[this.Class.singular_name].destroy(this.continue_to("destroyed"))},".edit click":function(a){this[this.Class.singular_name]=a.element_instance();this.singular_name=this.Class.singular_name;this.render({to:this[this.Class.singular_name].View().element_id(),action:"edit",plugin:"controller/scaffold/edit"})},".cancel click":function(a){this.show(a.element_instance())},".save click":function(a){this[this.Class.singular_name]=a.element_instance();a=this[this.Class.singular_name].View().edit_values();
this[this.Class.singular_name].update_attributes(a,this.continue_to("show"))},show:function(a){this[this.Class.singular_name]=a;this.singular_name=this.Class.singular_name;this.render({to:this[this.Class.singular_name].View().element_id(),action:"show",plugin:"controller/scaffold/show"})},destroyed:function(a){a&&this[this.Class.singular_name].View().destroy()}};include.set_path("jmvc/plugins/controller/stateful");include.plugins("controller");include("stateful_controller");include.set_path("jmvc/plugins/controller/stateful");
MVC.Controller.Stateful=MVC.Controller.extend({_should_attach_actions:!1,_events:null,_element:null},{init:function(a){MVC.Delegator.jmvc(a);this._actions=[];for(var c in this)if(val=this[c],"function"==typeof val&&"Class"!=c)for(var b=0;b<MVC.Controller.actions.length;b++)if(act=MVC.Controller.actions[b],act.matches(c)){var d=this.dispatch_closure(c);this._actions.push(new act(c,d,this.Class.className,a))}this._children=[];this.action_name="init";this.element=a},destroy:function(){if(this._destroyed)throw this.Class.className+
" controller instance has already been deleted";for(var a=0;a<this._actions.length;a++)this._actions[a].destroy();var c=MVC.Dom.data(this.element).delegation_events;if(this.element&&c)for(var b in c)for(var d=c[b],a=0;a<d.length;a++)d[a].destroy();this._parent&&this._parent.remove(this);this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element);this._destroyed=!0},dispatch_closure:function(a){return MVC.Function.bind(function(c){if(MVC.Dom.data(this.element).responding)return c=
c||{},c.action=a,c.controller=this.Class,c=c.constructor==MVC.Controller.Params?c:new MVC.Controller.Params(c),this.action_name=a,this[a](c)},this)},query:function(a){return MVC.Query.descendant(this.element,a)},respond:function(a){MVC.Dom.data(this.element).responding=a},add_child:function(a){a._parent=this;this._children.push(a);return a},remove_child:function(a){for(var c=0;c<this._children.length;c++)if(this._children[c]===a){this._children[c].splice(c,1);break}}});include.set_path("jmvc/plugins/view");
include.plugins("lang");include("view");"development"==include.get_env()&&include("fulljslint");MVC.Controller&&include.plugins("controller/view");include.set_path("jmvc/plugins/view");
MVC.View=function(a){this.set_options(a);if(a.precompiled)this.template={},this.template.process=a.precompiled,MVC.View.update(this.name,this);else{if(a.url||a.absolute_url||a.view_url){this.name=this.name?this.name:a.url||a.absolute_url||"views/"+a.view_url;var c=a.absolute_url||(a.url?MVC.root.join(a.url+(a.url.match(this.extMatch)?"":this.ext)):MVC.root.join("views/"+a.view_url+(a.view_url.match(this.extMatch)?"":this.ext))),b=MVC.View.get(this.name,this.cache);if(b)return b;if(b==MVC.View.INVALID_PATH)return null;
this.text=include.request(c+(this.cache||window._rhino?"":"?"+Math.random()));if(null==this.text)throw window._rhino&&print("Exception: There is no template at "+c),{type:"JMVC",message:"There is no template at "+c};}else if(a.hasOwnProperty("element")){if("string"==typeof a.element&&(c=a.element,a.element=MVC.$E(a.element),null==a.element))throw c+"does not exist!";this.text=a.element.value?a.element.value:a.element.innerHTML;this.name=a.element.id;this.type="["}b=new MVC.View.Compiler(this.text,
this.type);b.compile(a);MVC.View.update(this.name,this);this.template=b}};
MVC.View.prototype={render:function(a,c){a=a||{};var b=new MVC.View.Helpers(a);MVC.Object.extend(b,c||{});return this.template.process.call(a,a,b)},out:function(){return this.template.out},set_options:function(a){this.type=null!=a.type?a.type:MVC.View.type;this.cache=null!=a.cache?a.cache:MVC.View.cache;this.text=null!=a.text?a.text:null;this.name=null!=a.name?a.name:null;this.ext=null!=a.ext?a.ext:MVC.View.ext;this.extMatch=new RegExp(this.ext.replace(/\./,"."))},update:function(a,c){"string"==typeof a&&
(a=MVC.$E(a));if(null==c)return _template=this,function(b){MVC.View.prototype.update.call(_template,a,b)};"string"==typeof c?(params={},params.url=c,_template=this,params.onComplete=function(b){b=eval("("+b.responseText+")");MVC.View.prototype.update.call(_template,a,b)},MVC.Ajax||alert("You must include the Ajax plugin to use this feature"),new MVC.Ajax(params.url,params)):a.innerHTML=this.render(c)}};
MVC.View.Scanner=function(a,c,b){this.left_delimiter=c+"%";this.right_delimiter="%"+b;this.double_left=c+"%%";this.double_right="%%"+b;this.left_equal=c+"%=";this.left_comment=c+"%#";this.SplitRegexp="["==c?/(\[%%)|(%%\])|(\[%=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/:new RegExp("("+this.double_left+")|(%%"+this.double_right+")|("+this.left_equal+")|("+this.left_comment+")|("+this.left_delimiter+")|("+this.right_delimiter+"\n)|("+this.right_delimiter+")|(\n)");this.source=a;this.stag=null;this.lines=0};
MVC.View.Scanner.to_text=function(a){return null==a||void 0===a?"":a instanceof Date?a.toDateString():a.toString?a.toString():""};
MVC.View.Scanner.prototype={scan:function(a){scanline=this.scanline;regex=this.SplitRegexp;if(""==!this.source)for(var c=MVC.String.rsplit(this.source,/\n/),b=0;b<c.length;b++)this.scanline(c[b],regex,a)},scanline:function(a,c,b){this.lines++;a=MVC.String.rsplit(a,c);for(c=0;c<a.length;c++){var d=a[c];if(null!=d)try{b(d,this)}catch(e){throw{type:"MVC.View.Scanner",line:this.lines};}}}};MVC.View.Buffer=function(a,c){this.line=[];this.script="";this.pre_cmd=a;this.post_cmd=c;for(var b=0;b<this.pre_cmd.length;b++)this.push(a[b])};
MVC.View.Buffer.prototype={push:function(a){this.line.push(a)},cr:function(){this.script+=this.line.join("; ");this.line=[];this.script+="\n"},close:function(){if(0<this.line.length){for(var a=0;a<this.post_cmd.length;a++)this.push(pre_cmd[a]);this.script+=this.line.join("; ");line=null}}};
MVC.View.Compiler=function(a,c){this.pre_cmd=["var ___ViewO = [];"];this.post_cmd=[];this.source=" ";null!=a&&("string"==typeof a?(a=a.replace(/\r\n/g,"\n"),this.source=a=a.replace(/\r/g,"\n")):a.innerHTML&&(this.source=a.innerHTML),"string"!=typeof this.source&&(this.source=""));c=c||"<";var b=">";switch(c){case "[":b="]";break;case "<":break;default:throw c+" is not a supported deliminator";}this.scanner=new MVC.View.Scanner(this.source,c,b);this.out=""};
MVC.View.Compiler.prototype={compile:function(a){a=a||{};this.out="";var c=new MVC.View.Buffer(this.pre_cmd,this.post_cmd),b="",d=function(b){b=b.replace(/\\/g,"\\\\");b=b.replace(/\n/g,"\\n");return b=b.replace(/"/g,'\\"')};this.scanner.scan(function(a,e){if(null==e.stag)switch(a){case "\n":b+="\n";c.push('___ViewO.push("'+d(b)+'");');c.cr();b="";break;case e.left_delimiter:case e.left_equal:case e.left_comment:e.stag=a;0<b.length&&c.push('___ViewO.push("'+d(b)+'")');b="";break;case e.double_left:b+=
e.left_delimiter;break;default:b+=a}else switch(a){case e.right_delimiter:switch(e.stag){case e.left_delimiter:"\n"==b[b.length-1]?(b=MVC.String.chop(b),c.push(b),c.cr()):c.push(b);break;case e.left_equal:c.push("___ViewO.push((MVC.View.Scanner.to_text("+b+")))")}e.stag=null;b="";break;case e.double_right:b+=e.right_delimiter;break;default:b+=a}});0<b.length&&c.push('___ViewO.push("'+d(b)+'")');c.close();this.out=c.script+";";var e="this.process = function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {"+
this.out+" return ___ViewO.join('');}}}catch(e){e.lineNumber=null;throw e;}};";try{eval(e)}catch(f){if("undefined"!=typeof JSLINT)for(JSLINT(this.out),e=0;e<JSLINT.errors.length;e++){var g=JSLINT.errors[e];if("Unnecessary semicolon."!=g.reason)throw g.line++,f=Error(),f.lineNumber=g.line,f.message=g.reason,a.url&&(f.fileName=a.url),f;}else throw f;}}};
MVC.View.config=function(a){MVC.View.cache=null!=a.cache?a.cache:MVC.View.cache;MVC.View.type=null!=a.type?a.type:MVC.View.type;MVC.View.ext=null!=a.ext?a.ext:MVC.View.ext;var c={};MVC.View.templates_directory=c;MVC.View.get=function(b,a){return 0==a?null:c[b]?c[b]:null};MVC.View.update=function(b,a){null!=b&&(c[b]=a)};MVC.View.INVALID_PATH=-1};MVC.View.config({cache:"production"==include.get_env(),type:"<",ext:".ejs"});MVC.View.PreCompiledFunction=function(a,c,b){new MVC.View({name:c,precompiled:b})};
MVC.View.Helpers=function(a){this.data=a};MVC.View.Helpers.prototype={partial:function(a,c){c||(c=this.data);return(new MVC.View(a)).render(c)},to_text:function(a,c){return null==a||void 0===a?c||"":a instanceof Date?a.toDateString():a.toString?a.toString().replace(/\n/g,"<br />").replace(/''/g,"'"):""}};
include.view=function(a){"development"==include.get_env()?new MVC.View({url:(new MVC.File("../"+a)).join_current()}):"compress"==include.get_env()&&(include({path:"../"+a,process:MVC.View.process_include,ignore:!0}),new MVC.View({url:(new MVC.File("../"+a)).join_current()}))};include.views=function(){for(var a=0;a<arguments.length;a++)include.view(arguments[a]+MVC.View.ext)};
MVC.View.process_include=function(a){var c=new MVC.View({text:a.text});return'MVC.View.PreCompiledFunction("'+a.original_path+'", "'+a.path+'",function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {'+c.out()+" return ___ViewO.join('');}}}catch(e){e.lineNumber=null;throw e;}})"};MVC._no_conflict||(View=MVC.View);
MVC.Native.extend("String",{rsplit:function(a,c){for(var b=c.exec(a),d=[];null!=b;){var e=b.index;0!=e&&(a.substring(0,e),d.push(a.substring(0,e)),a=a.slice(e));d.push(b[0]);a=a.slice(b[0].length);b=c.exec(a)}""==!a&&d.push(a);return d},chop:function(a){return a.substr(0,a.length-1)}});include.set_path("jmvc/plugins/controller/view");include.plugins("view","controller");include("controller_view");include.set_path("jmvc/plugins/controller/view");
MVC.Controller.prototype.render=function(a){var c,b=this.Class.className,d=this.action_name;a||(a={});var e={};if(a.helpers)for(var f=0;f<a.helpers.length;f++){var g=MVC.String.classize(a.helpers[f]);MVC.Object.extend(e,window[g]?window[g].View().helpers:{})}if("string"==typeof a)c=(new MVC.View({url:a})).render(this,e),a={text:c,to:this.element};else if(a.text)c=a.text;else{f=function(a){a=MVC.String.include(a,"/")?a.split("/").join("/_"):b+"/"+a;return a+=MVC.View.ext};a.plugin&&(c="../jmvc/plugins/"+
a.plugin);d=a.action?"../views/"+f(a.action):a.partial?"../views/"+f(a.partial):"../views/"+b+"/"+d.replace(/\.|#/g,"").replace(/ /g,"_")+MVC.View.ext;f=a.using||this;if(a.locals)for(var h in a.locals)f[h]=a.locals[h];var k;if(c)try{k=new MVC.View({url:MVC.View.get(c)?c:d})}catch(l){if("JMVC"!=l.type)throw l;k=new MVC.View({url:c})}else k=new MVC.View({url:(new MVC.File(d)).join_from(this.Class._path)});c=k.render(f,e)}e="to before after top bottom replace".split(" ");k=null;for(h=0;h<e.length;h++){if("string"==
typeof a[e[h]]&&(k=a[e[h]],a[e[h]]=MVC.$E(k),!a[e[h]]))throw{message:"Can't find element with id: "+k,name:"ControllerView: Missing Element"};if(a[e[h]])if(k=a[e[h]],"to"==e[h])MVC.$E.update?MVC.$E.update(a.to,c):a.to.innerHTML=c;else if("replace"==e[h])MVC.$E.replace(a.replace,c);else{if(!MVC.$E.insert)throw{message:"Include can't insert "+e[h]+" without the element plugin.",name:"ControllerView: Missing Plugin"};d={};d[e[h]]=c;MVC.$E.insert(k,d)}}return c};include.set_path("jmvc/plugins/view/helpers");
include.plugins("view");include("view_helpers");include.set_path("jmvc/plugins/view/helpers");
MVC.Object.extend(MVC.View.Helpers.prototype,{check_box_tag:function(a,c,b,d){b=b||{};d&&(b.checked="checked");return this.input_field_tag(a,c,"checkbox",b)},date_tag:function(a,c,b){c instanceof Date||(c=new Date);var d=[],e=[];b=[];var f=c.getFullYear(),g=c.getMonth();c=c.getDate();for(var h=f-15;h<f+15;h++)d.push({value:h,text:h});for(h=0;12>h;h++)e.push({value:h,text:MVC.Date.month_names[h]});for(h=0;31>h;h++)b.push({value:h+1,text:h+1});d=this.select_tag(a+"[year]",f,d,{id:a+"[year]"});e=this.select_tag(a+
"[month]",g,e,{id:a+"[month]"});a=this.select_tag(a+"[day]",c,b,{id:a+"[day]"});return d+e+a},time_tag:function(a,c,b,d){var e=[];if(null==d||0==d)d=60;for(var f=0;24>f;f++)for(var g=0;60>g;g+=d){var h=(10>f?"0":"")+f+":"+(10>g?"0":"")+g;e.push({text:h,value:h})}return this.select_tag(a,c,e,b)},file_tag:function(a,c,b){return this.input_field_tag(a+"[file]",c,"file",b)},form_tag:function(a,c){c=c||{};1==c.multipart&&(c.method="post",c.enctype="multipart/form-data");c.action=a;return this.start_tag_for("form",
c)},form_tag_end:function(){return this.tag_end("form")},hidden_field_tag:function(a,c,b){return this.input_field_tag(a,c,"hidden",b)},input_field_tag:function(a,c,b,d){d=d||{};d.id=d.id||a;d.value=c||"";d.type=b||"text";d.name=a;return this.single_tag_for("input",d)},label_tag:function(a,c){c=c||{};return this.start_tag_for("label",c)+a+this.tag_end("label")},link_to:function(a,c,b){a||(a="null");b||(b={});this.set_confirm(b);b.href=c;return this.start_tag_for("a",b)+a+this.tag_end("a")},link_to_if:function(a,
c,b,d){return this.link_to_unless(!a,c,b,d)},link_to_unless:function(a,c,b,d){return a?c:this.link_to(c,b,d)},set_confirm:function(a){a.confirm&&(a.onclick=a.onclick||"",a.onclick=a.onclick+'; var ret_confirm = confirm("'+a.confirm+'"); if(!ret_confirm){ return false;} ',a.confirm=null)},submit_link_to:function(a,c,b,d){a||(a="null");b||(b={});b.type="submit";b.value=a;this.set_confirm(b);b.onclick=b.onclick+';window.location="'+c+'"; return false;';return this.single_tag_for("input",b)},password_field_tag:function(a,
c,b){return this.input_field_tag(a,c,"password",b)},select_tag:function(a,c,b,d){d=d||{};d.id=d.id||a;d.name=a;a=""+this.start_tag_for("select",d);for(d=0;d<b.length;d++){var e=b[d];"string"==typeof e&&(e={value:e});e.text||(e.text=e.value);e.value||(e.text=e.text);var f={value:e.value};e.value==c&&(f.selected="selected");a+=this.start_tag_for("option",f)+e.text+this.tag_end("option")}return a+=this.tag_end("select")},single_tag_for:function(a,c){return this.tag(a,c,"/>")},start_tag_for:function(a,
c){return this.tag(a,c)},submit_tag:function(a,c){c=c||{};c.type=c.type||"submit";c.value=a||"Submit";return this.single_tag_for("input",c)},tag:function(a,c,b){b=b||">";var d=" ",e;for(e in c)if(c.hasOwnProperty(e)){value=null!=c[e]?c[e].toString():"";if("Class"==e||"klass"==e)e="class";d=-1!=value.indexOf("'")?d+(e+'="'+value+'" '):d+(e+"='"+value+"' ")}return"<"+a+d+b},tag_end:function(a){return"</"+a+">"},text_area_tag:function(a,c,b){b=b||{};b.id=b.id||a;b.name=b.name||a;c=c||"";b.size&&(b.cols=
b.size.split("x")[0],b.rows=b.size.split("x")[1],delete b.size);b.cols=b.cols||50;b.rows=b.rows||4;return this.start_tag_for("textarea",b)+c+this.tag_end("textarea")},text_field_tag:function(a,c,b){return this.input_field_tag(a,c,"text",b)},img_tag:function(a,c){c=c||{};c.src="resources/images/"+a;return this.single_tag_for("img",c)}});MVC.View.Helpers.prototype.text_tag=MVC.View.Helpers.prototype.text_area_tag;
(function(){var a={},c=0;MVC.View.Helpers.link_data=function(b){var d=c++;a[d]=b;return"_data='"+d+"'"};MVC.View.Helpers.get_data=function(b){return b?(b=b.getAttribute("_data"))?a[parseInt(b)]:null:null};MVC.View.Helpers.prototype.link_data=function(b){return MVC.View.Helpers.link_data(b)};MVC.View.Helpers.prototype.get_data=function(b){return MVC.View.Helpers.get_data(b)}})();include.set_path("jmvc/plugins/dom/element");include.plugins("lang/vector");include("element");include.set_path("jmvc/plugins/lang/vector");
include.plugins("lang","dom/event");include("vector");include.set_path("jmvc/plugins/lang/vector");MVC.Vector=function(){this.update(MVC.Array.from(arguments))};
MVC.Vector.prototype={app:function(a){for(var c=[],b=0;b<this.array.length;b++)c.push(a(this.array[b]));return(new MVC.Vector).update(c)},plus:function(){for(var a=arguments[0]instanceof MVC.Vector?arguments[0].array:MVC.Array.from(arguments),c=this.array.slice(0),b=new MVC.Vector,d=0;d<a.length;d++)c[d]=(c[d]?c[d]:0)+a[d];return b.update(c)},minus:function(){for(var a=arguments[0]instanceof MVC.Vector?arguments[0].array:MVC.Array.from(arguments),c=this.array.slice(0),b=new MVC.Vector,d=0;d<a.length;d++)c[d]=
(c[d]?c[d]:0)-a[d];return b.update(c)},equals:function(){for(var a=arguments[0]instanceof MVC.Vector?arguments[0].array:MVC.Array.from(arguments),c=this.array.slice(0),b=new MVC.Vector,d=0;d<a.length;d++)if(c[d]!=a[d])return null;return b.update(c)},x:function(){return this.array[0]},width:function(){return this.array[0]},y:function(){return this.array[1]},height:function(){return this.array[1]},top:function(){return this.array[1]},left:function(){return this.array[0]},toString:function(){return"("+
this.array[0]+","+this.array[1]+")"},update:function(a){if(this.array)for(var c=0;c<this.array.length;c++)delete this.array[c];this.array=a;for(c=0;c<a.length;c++)this[c]=this.array[c];return this}};MVC.Event.pointer=function(a){return new MVC.Vector(a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),a.clientY+(document.documentElement.scrollTop||document.body.scrollTop))};include.set_path("jmvc/plugins/dom/element");
MVC.Element=function(a){"string"==typeof a&&(a=document.getElementById(a));return a?a._mvcextend?a:MVC.Element.extend(a):a};
MVC.Object.extend(MVC.Element,{insert:function(a,c){a=MVC.$E(a);"string"==typeof c&&(c={bottom:c});var b,d,e;for(position in c)if(c.hasOwnProperty(position))if(b=c[position],position=position.toLowerCase(),d=MVC.$E._insertionTranslations[position],b&&1==b.nodeType)d(a,b);else for(e=("before"==position||"after"==position?a.parentNode:a).tagName.toUpperCase(),b=MVC.$E._getContentFromAnonymousElement(e,b),"top"!=position&&"after"!=position||b.reverse(),e=0;e<b.length;e++)d(a,b[e]);return a},_insertionTranslations:{before:function(a,
c){a.parentNode.insertBefore(c,a)},top:function(a,c){a.insertBefore(c,a.firstChild)},bottom:function(a,c){a.appendChild(c)},after:function(a,c){a.parentNode.insertBefore(c,a.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}},replace:function(a,c){a=MVC.$E(a);if(1==c.nodeType)return a.parentNode.replaceChild(c,
a),a;if(a.outerHTML){var b=a.parentNode,d=b.tagName.toUpperCase();if(MVC.Element._insertionTranslations.tags[d]){var e=a.next(),d=MVC.Element._getContentFromAnonymousElement(d,c);b.removeChild(a);if(e)for(var f=0;f<d.length;f++)b.insertBefore(d[f],e);else for(f=0;f<d.length;f++)b.appendChild(d[f])}else a.outerHTML=c}else 1!=c.nodeType&&(b=a.ownerDocument.createRange(),b.selectNode(a),c=b.createContextualFragment(c)),a.parentNode.replaceChild(c,a);return a},_getContentFromAnonymousElement:function(a,
c){var b=document.createElement("div"),d=MVC.$E._insertionTranslations.tags[a];if(d){b.innerHTML=d[0]+c+d[1];for(var e=0;e<d[2];e++)b=b.firstChild}else b.innerHTML=c;return MVC.Array.from(b.childNodes)},get_children:function(a){var c=[];for(a=a.first();a;)c.push(a),a=a.next();return c},first:function(a,c){c=c||function(){return!0};for(var b=a.firstChild;b&&1!=b.nodeType||b&&!c(b);)b=b.nextSibling;return MVC.$E(b)},last:function(a,c){c=c||function(){return!0};for(var b=a.lastChild;b&&1!=b.nodeType||
b&&!c(b);)b=b.previousSibling;return MVC.$E(b)},next:function(a,c,b){b=b||function(){return!0};for(var d=a.nextSibling;d&&1!=d.nodeType||d&&!b(d);)d=d.nextSibling;return!d&&c?MVC.$E(a.parentNode).first(b):MVC.$E(d)},previous:function(a,c,b){b=b||function(){return!0};for(var d=a.previousSibling;d&&1!=d.nodeType||d&&!b(d);)d=d.previousSibling;return!d&&c?MVC.$E(a.parentNode).last(b):MVC.$E(d)},toggle:function(a){return"none"==a.style.display?a.style.display="":a.style.display="none"},make_positioned:function(a){a=
MVC.$E(a);var c=MVC.Element.get_style(a,"position");"static"!=c&&c||(a._madePositioned=!0,a.style.position="relative",window.opera&&(a.style.top=0,a.style.left=0));return a},get_style:function(a,c){a=MVC.$E(a);c="float"==c?"cssFloat":MVC.String.camelize(c);var b;b=a.currentStyle?a.currentStyle[c]:(b=document.defaultView.getComputedStyle(a,null))?b[c]:null;return"opacity"==c?b?parseFloat(b):1:"auto"==b?null:b},has:function(a,c){if(!c)return!1;"string"==typeof c&&(c=MVC.$E(c));return a.contains?a!=
c&&a.contains(c):!!(a.compareDocumentPosition(c)&16)},update:function(a,c){a=MVC.$E(a);var b=a.tagName.toUpperCase();if((MVC.Browser.IE||MVC.Browser.Opera)&&b in MVC.$E._insertionTranslations.tags){for(var d;d=a.childNodes[0];)a.removeChild(d);b=MVC.$E._getContentFromAnonymousElement(b,c);for(d=0;d<b.length;d++)a.appendChild(b[d])}else a.innerHTML=c;return a},remove:function(a){return a.parentNode.removeChild(a)},dimensions:function(a){if(a===window)return new MVC.Vector(window.innerWidth?window.innerWidth:
document.documentElement.clientWidth,window.innerHeight?window.innerHeight:document.documentElement.clientHeight);if(!MVC.Element.has(document.body,a))return new MVC.Vector(parseInt(a.get_style("width")),parseInt(a.get_style("height")));var c=a.style.display;if("none"!=c&&null!=c)return new MVC.Vector(a.offsetWidth,a.offsetHeight);var c=a.style,b=c.visibility,d=c.position,e=c.display;c.visibility="hidden";c.position="absolute";c.display="block";var f=a.clientWidth;a=a.clientHeight;c.display=e;c.position=
d;c.visibility=b;return new MVC.Vector(f,a)},add_class:function(a,c){var b=this.class_names(a);if(!MVC.Array.include(b,c))return b.push(c),a.className=b.join(" "),a},remove_class:function(a,c){for(var b=this.class_names(a),d=[],e=0;e<b.length;e++)b[e]!=c&&d.push(b[e]);a.className=d.join(" ");return a},class_names:function(a){return a.className.split(MVC.Element._class_name_split)},_class_name_split:/\s+/,has_class:function(a,c){for(var b=this.class_names(a),d,e=0;e<b.length;e++)if(d=b[e].match(c))return d}});
MVC.Element.extend=function(a){for(var c in MVC.Element)if(MVC.Element.hasOwnProperty(c)){var b=MVC.Element[c];"function"==typeof b&&"_"!=c[0]&&MVC.Element._extend(b,c,a)}a._mvcextend=!0;return a};MVC.Element._extend=function(a,c,b){b[c]=function(){var c=MVC.Array.from(arguments);c.unshift(b);return a.apply(b,c)}};MVC.$E=MVC.Element;MVC._no_conflict||($E=MVC.$E);include.next_function();include.set_path("engines/Wizard/controllers");
WizardEngine=MVC.Controller.Stateful.extend("Wizard",{title:"Basic Wizard With Progress Bar",$element:null,$back:null,$next:null,options:null,isInitialized:!1,forms:[],defaultOptions:function(){var a=this;return{submit:".submit",afterSelect:function(a,b){$("#progressbar").progressbar("value",b.percentComplete);$("#location").text("("+b.stepsComplete+"/"+b.stepsPossible+")")},stepsWrapper:"#wizard-steps",beforeForward:function(c,b){var d=a.forms[b.stepIndex-1];return(d.validate?d.validate():1)?(d.update&&
d.update(),!0):!1},afterForward:function(c,b){window.location.hash?window.location.hash="#"+b.stepIndex:window.location+="#"+b.stepIndex;$("div.accordion",b.step).accordion({create:function(b,a){var c=$("h3[tabindex=0]",$(this)).attr("choice-id");$("#"+c,$(this)).val(!0);$("h3[tabindex=-1]",$(this)).each(function(){var b=$(this).attr("choice-id");$("#"+b).val(!1)})},change:function(b,a){$("#"+a.oldHeader.attr("choice-id"),a.oldContent).val(!1);$("#"+a.newHeader.attr("choice-id"),a.newContent).val(!0)}});
var d=a.forms[b.stepIndex];d.activate&&d.activate()},afterBackward:function(a,b){window.location.hash?window.location.hash="#"+b.stepIndex:window.location+="#"+b.stepIndex}}},submitHandler:function(a){Controller.publish("Wizard.submit",a)},init:function(a,c,b,d){if(!document.getElementById(a))throw"Wizard#init(elementId,options): elementId can not be null";this._super(MVC.$E(a));this.options=MVC.Object.extend(this.defaultOptions(),b);this.title=c||this.title;this.submitHandler=d||this.submitHandler;
this.$element=$(this.element)},initialize:function(){this.render({to:this.element,action:"initialize"});$("#progressbar").progressbar();this.$element.wizard(this.options);this.$back=$("button.backward",this.$element);this.$next=$("button.forward",this.$element);this.isInitialized=!0;return this},"button.forward click":function(a){if(!this.isInitialized)throw"Wizard instance was not initialized. Call Wizard.initialize(data) first.";},"button.backward click":function(a){if(!this.isInitialized)throw"Wizard instance was not initialized. Call Wizard.initialize(data) first.";
},"button.submit click":function(a){if(!this.isInitialized)throw"Wizard instance was not initialized. Call Wizard.initialize(data) first.";this.submitHandler(a)},addForm:function(a){if("function"!=typeof a.toHtml)throw"form does not have toHtml function";this.forms.push(a);return this}});include.set_path("engines/Wizard/views/Wizard");
MVC.View.PreCompiledFunction("../views/Wizard/initialize.ejs","engines/Wizard/views/Wizard/initialize.ejs",function(a,c){try{with(c)with(a){var b=[];b.push("    <h2>");b.push(MVC.View.Scanner.to_text(title));b.push("</h2>\n");b.push("\n");b.push('    <h3>Progress <span id="location"></span></h3>\n');b.push('    <div id="progressbar"></div>\n');b.push("\n");b.push('    <div id="wizard-steps" class="wizard-form wizard-branch wizard-wrapper">\n');b.push("        ");for(var d=0,e=forms.length,f=forms[0];d<
e;f=forms[++d])b.push("\n"),b.push("            "),b.push(MVC.View.Scanner.to_text(f.toHtml())),b.push("\n"),b.push("        ");b.push("\n");b.push('        <form class="navigation">\n');b.push('            <ul class="clearfix">\n');b.push('                <li><button type="button" name="backward" class="backward">Back</button></li>\n');b.push('                <li><button type="button" name="forward" class="forward">Next</button></li>\n');b.push('                <li><button type="button" name="submit" class="submit">Finish</button></li>\n');
b.push("            </ul>\n");b.push("        </form>\n");b.push("    </div>");return b.join("")}}catch(g){throw g.lineNumber=null,g;}});include.set_path("engines/FileUpload/apps");include.css("jquery.fileupload-ui","jquery.fileupload.table");include.resources("jquery.fileupload","jquery.fileupload-ui","jquery.iframe-transport","jquery.iframe-transport.patch","jquery.fileupload.integration");include.plugins("controller","controller/scaffold","view","view/helpers");
include(function(){include.models();include.controllers("FileUpload");include.views("views/FileUpload/initialize","views/FileUpload/template-upload","views/FileUpload/template-download")});include.set_path("engines/FileUpload/resources");
(function(a){a.widget("blueimp.fileupload",{options:{namespace:void 0,dropZone:a(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,formData:function(a){return a.serializeArray()},add:function(a,b){b.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["namespace",
"dropZone","fileInput"],_isXHRUpload:function(a){return!a.forceIframeTransport&&"undefined"!==typeof XMLHttpRequestUpload&&"undefined"!==typeof File&&(!a.multipart||"undefined"!==typeof FormData)},_getFormData:function(c){var b;return"function"===typeof c.formData?c.formData(c.form):a.isArray(c.formData)?c.formData:c.formData?(b=[],a.each(c.formData,function(a,c){b.push({name:a,value:c})}),b):[]},_getTotal:function(c){var b=0;a.each(c,function(a,c){b+=c.size||1});return b},_onProgress:function(a,
b){if(a.lengthComputable){var d=b.total||this._getTotal(b.files),e=parseInt(a.loaded/a.total*(b.chunkSize||d),10)+(b.uploadedBytes||0);this._loaded+=e-(b.loaded||b.uploadedBytes||0);b.lengthComputable=!0;b.loaded=e;b.total=d;this._trigger("progress",a,b);this._trigger("progressall",a,{lengthComputable:!0,loaded:this._loaded,total:this._total})}},_initProgressListener:function(c){var b=this,d=c.xhr?c.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind("progress",function(a){var d=a.originalEvent;
a.lengthComputable=d.lengthComputable;a.loaded=d.loaded;a.total=d.total;b._onProgress(a,c)}),c.xhr=function(){return d})},_initXHRData:function(c){var b,d=c.files[0];if(!c.multipart||c.blob)(c.headers=a.extend(c.headers,{"X-File-Name":d.name,"X-File-Type":d.type,"X-File-Size":d.size}),c.blob)?c.multipart||(c.contentType="application/octet-stream",c.data=c.blob):(c.contentType=d.type,c.data=d);c.multipart&&"undefined"!==typeof FormData&&(c.postMessage?(b=this._getFormData(c),c.blob?b.push({name:c.paramName,
value:c.blob}):a.each(c.files,function(a,d){b.push({name:c.paramName,value:d})})):(c.formData instanceof FormData?b=c.formData:(b=new FormData,a.each(this._getFormData(c),function(a,c){b.append(c.name,c.value)})),c.blob?b.append(c.paramName,c.blob):a.each(c.files,function(a,d){d instanceof Blob&&b.append(c.paramName,d)})),c.data=b);c.blob=null},_initIframeSettings:function(a){a.dataType="iframe "+(a.dataType||"");a.formData=this._getFormData(a)},_initDataSettings:function(a){this._isXHRUpload(a)?
(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a,"iframe")},_initFormSettings:function(c){c.form&&c.form.length||(c.form=a(c.fileInput.prop("form")));c.paramName||(c.paramName=c.fileInput.prop("name")||"files[]");c.url||(c.url=c.form.prop("action")||location.href);c.type=(c.type||c.form.prop("method")||"").toUpperCase();"POST"!==c.type&&"PUT"!==c.type&&(c.type="POST")},_getAJAXSettings:function(c){c=
a.extend({},this.options,c);this._initFormSettings(c);this._initDataSettings(c);return c},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(c,b,d){var e=a.Deferred(),f=e.promise();b=b||this.options.context||f;!0===c?e.resolveWith(b,d):!1===c&&e.rejectWith(b,d);f.abort=e.promise;return this._enhancePromise(f)},_chunkedUpload:function(c,b){var d=this,e=c.files[0],f=e.size,g=c.uploadedBytes=c.uploadedBytes||0,h=c.maxChunkSize||f,k=e.webkitSlice||
e.mozSlice||e.slice,l,p;if(!(this._isXHRUpload(c)&&k&&(g||h<f))||c.data)return!1;if(b)return!0;if(g>=f)return e.error="uploadedBytes",this._getXHRPromise(!1,c.context,[null,"error",e.error]);f=Math.ceil((f-g)/h);l=function(b){return b?l(--b).pipe(function(){var f=a.extend({},c);f.blob=k.call(e,g+b*h,g+(b+1)*h);f.chunkSize=f.blob.size;d._initXHRData(f);d._initProgressListener(f);return p=(a.ajax(f)||d._getXHRPromise(!1,f.context)).done(function(){f.loaded||d._onProgress(a.Event("progress",{lengthComputable:!0,
loaded:f.chunkSize,total:f.chunkSize}),f);c.uploadedBytes=f.uploadedBytes+=f.chunkSize})}):d._getXHRPromise(!0,c.context)};f=l(f);f.abort=function(){return p.abort()};return this._enhancePromise(f)},_beforeSend:function(a,b){0===this._active&&this._trigger("start");this._active+=1;this._loaded+=b.uploadedBytes||0;this._total+=this._getTotal(b.files)},_onDone:function(c,b,d,e){this._isXHRUpload(e)||this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:1,total:1}),e);e.result=c;e.textStatus=
b;e.jqXHR=d;this._trigger("done",null,e)},_onFail:function(a,b,d,e){e.jqXHR=a;e.textStatus=b;e.errorThrown=d;this._trigger("fail",null,e);e.recalculateProgress&&(this._loaded-=e.loaded||e.uploadedBytes||0,this._total-=e.total||this._getTotal(e.files))},_onAlways:function(a,b,d,e){--this._active;e.textStatus=b;d&&d.always?(e.jqXHR=d,e.result=a):(e.jqXHR=a,e.errorThrown=d);this._trigger("always",null,e);0===this._active&&(this._trigger("stop"),this._loaded=this._total=0)},_onSend:function(c,b){var d=
this,e,f,g,h=d._getAJAXSettings(b),k=function(b,f){d._sending+=1;return e=e||(!1!==b&&!1!==d._trigger("send",c,h)&&(d._chunkedUpload(h)||a.ajax(h))||d._getXHRPromise(!1,h.context,f)).done(function(b,a,c){d._onDone(b,a,c,h)}).fail(function(b,a,c){d._onFail(b,a,c,h)}).always(function(b,a,c){--d._sending;d._onAlways(b,a,c,h);if(h.limitConcurrentUploads&&h.limitConcurrentUploads>d._sending)for(b=d._slots.shift();b;){if(!b.isRejected()){b.resolve();break}b=d._slots.shift()}})};this._beforeSend(c,h);return this.options.sequentialUploads||
this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(1<this.options.limitConcurrentUploads?(f=a.Deferred(),this._slots.push(f),g=f.pipe(k)):g=this._sequence=this._sequence.pipe(k,k),g.abort=function(){var b=[void 0,"abort","abort"];return e?e.abort():(f&&f.rejectWith(b),k(!1,b))},this._enhancePromise(g)):k()},_onAdd:function(c,b){var d=this,e=!0,f=a.extend({},this.options,b),g=f.limitMultiFileUploads,h;if(!f.singleFileUploads&&!g||!this._isXHRUpload(f))h=[b.files];
else if(!f.singleFileUploads&&g)for(h=[],f=0;f<b.files.length;f+=g)h.push(b.files.slice(f,f+g));b.originalFiles=b.files;a.each(h||b.files,function(f,g){var p=a.extend({},b,{files:h?g:[g]});p.submit=function(){return p.jqXHR=this.jqXHR=!1!==d._trigger("submit",c,this)&&d._onSend(c,this)};return e=d._trigger("add",c,p)});return e},_normalizeFile:function(a,b){void 0===b.name&&void 0===b.size&&(b.name=b.fileName,b.size=b.fileSize)},_replaceFileInput:function(c){var b=c.clone(!0);a("<form></form>").append(b)[0].reset();
c.after(b).detach();a.cleanData(c.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(a,e){return e===c[0]?b[0]:e});c[0]===this.element[0]&&(this.element=b)},_onChange:function(c){var b=c.data.fileupload,d={files:a.each(a.makeArray(c.target.files),b._normalizeFile),fileInput:a(c.target),form:a(c.target.form)};d.files.length||(d.files=[{name:c.target.value.replace(/^.*\\/,"")}]);b.options.replaceFileInput&&b._replaceFileInput(d.fileInput);if(!1===b._trigger("change",c,d)||
!1===b._onAdd(c,d))return!1},_onPaste:function(c){var b=c.data.fileupload,d=c.originalEvent.clipboardData,e={files:[]};a.each(d&&d.items||[],function(b,a){var c=a.getAsFile&&a.getAsFile();c&&e.files.push(c)});if(!1===b._trigger("paste",c,e)||!1===b._onAdd(c,e))return!1},_onDrop:function(c){var b=c.data.fileupload,d=c.dataTransfer=c.originalEvent.dataTransfer,d={files:a.each(a.makeArray(d&&d.files),b._normalizeFile)};if(!1===b._trigger("drop",c,d)||!1===b._onAdd(c,d))return!1;c.preventDefault()},_onDragOver:function(a){var b=
a.data.fileupload,d=a.dataTransfer=a.originalEvent.dataTransfer;if(!1===b._trigger("dragover",a))return!1;d&&(d.dropEffect=d.effectAllowed="copy");a.preventDefault()},_initEventHandlers:function(){var a=this.options.namespace;this.options.dropZone.bind("dragover."+a,{fileupload:this},this._onDragOver).bind("drop."+a,{fileupload:this},this._onDrop).bind("paste."+a,{fileupload:this},this._onPaste);this.options.fileInput.bind("change."+a,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var a=
this.options.namespace;this.options.dropZone.unbind("dragover."+a,this._onDragOver).unbind("drop."+a,this._onDrop).unbind("paste."+a,this._onPaste);this.options.fileInput.unbind("change."+a,this._onChange)},_beforeSetOption:function(a,b){this._destroyEventHandlers()},_afterSetOption:function(c,b){var d=this.options;d.fileInput||(d.fileInput=a());d.dropZone||(d.dropZone=a());this._initEventHandlers()},_setOption:function(c,b){var d=-1!==a.inArray(c,this._refreshOptionsList);d&&this._beforeSetOption(c,
b);a.Widget.prototype._setOption.call(this,c,b);d&&this._afterSetOption(c,b)},_create:function(){var c=this.options;c.namespace=c.namespace||this.widgetName;void 0===c.fileInput?c.fileInput=this.element.is("input:file")?this.element:this.element.find("input:file"):c.fileInput||(c.fileInput=a());c.dropZone||(c.dropZone=a());this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=this._loaded=this._total=0;this._initEventHandlers()},destroy:function(){this._destroyEventHandlers();
a.Widget.prototype.destroy.call(this)},enable:function(){a.Widget.prototype.enable.call(this);this._initEventHandlers()},disable:function(){this._destroyEventHandlers();a.Widget.prototype.disable.call(this)},add:function(c){c&&!this.options.disabled&&(c.files=a.each(a.makeArray(c.files),this._normalizeFile),this._onAdd(null,c))},send:function(c){return c&&!this.options.disabled&&(c.files=a.each(a.makeArray(c.files),this._normalizeFile),c.files.length)?this._onSend(null,c):this._getXHRPromise(!1,c&&
c.context)}})})(jQuery);include.set_path("engines/FileUpload/resources");
(function(a){a.widget("blueimpUI.fileupload",a.blueimp.fileupload,{options:{autoUpload:!1,maxNumberOfFiles:void 0,maxFileSize:void 0,minFileSize:1,acceptFileTypes:/.+$/i,previewFileTypes:/^image\/(gif|jpeg|png)$/,previewMaxFileSize:5E6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,dataType:"json",add:function(c,b){var d=a(this).data("fileupload"),e=b.files;d._adjustMaxNumberOfFiles(-e.length);b.isAdjusted=!0;b.files.valid=b.isValidated=d._validate(e);b.context=d._renderUpload(e).appendTo(d._files).data("data",
b);d._reflow=d._transition&&b.context[0].offsetWidth;b.context.addClass("in");(d.options.autoUpload||b.autoUpload)&&b.isValidated&&b.submit()},send:function(c,b){if(!b.isValidated){var d=a(this).data("fileupload");b.isAdjusted||d._adjustMaxNumberOfFiles(-b.files.length);if(!d._validate(b.files))return!1}b.context&&b.dataType&&"iframe"===b.dataType.substr(0,6)&&b.context.find(".progressbar div").css("width","100%")},done:function(c,b){var d=a(this).data("fileupload"),e,f;b.context?b.context.each(function(c){var h=
a.isArray(b.result)&&b.result[c]||{error:"emptyResult"};h.error&&d._adjustMaxNumberOfFiles(1);d._transitionCallback(a(this).removeClass("in"),function(b){e=d._renderDownload([h]);f=b.find(".preview img, .preview canvas");f.length&&e.find(".preview img").prop("width",f.prop("width")).prop("height",f.prop("height"));e.replaceAll(b);d._reflow=d._transition&&e[0].offsetWidth;e.addClass("in")})}):(e=d._renderDownload(b.result).appendTo(d._files),d._reflow=d._transition&&e[0].offsetWidth,e.addClass("in"))},
fail:function(c,b){var d=a(this).data("fileupload"),e;d._adjustMaxNumberOfFiles(b.files.length);b.context?b.context.each(function(c){if("abort"!==b.errorThrown){var g=b.files[c];g.error=g.error||b.errorThrown||!0;d._transitionCallback(a(this).removeClass("in"),function(b){e=d._renderDownload([g]).replaceAll(b);d._reflow=d._transition&&e[0].offsetWidth;e.addClass("in")})}else d._transitionCallback(a(this).removeClass("in"),function(b){b.remove()})}):"abort"!==b.errorThrown&&(d._adjustMaxNumberOfFiles(-b.files.length),
b.context=d._renderUpload(b.files).appendTo(d._files).data("data",b),d._reflow=d._transition&&b.context[0].offsetWidth,b.context.addClass("in"))},progress:function(a,b){b.context&&b.context.find(".progressbar div").css("width",parseInt(b.loaded/b.total*100,10)+"%")},progressall:function(c,b){a(this).find(".fileupload-progressbar div").css("width",parseInt(b.loaded/b.total*100,10)+"%")},start:function(){a(this).find(".fileupload-progressbar div").css("width","0%")},stop:function(){a(this).find(".fileupload-progressbar div").css("width",
"0%")},destroy:function(c,b){var d=a(this).data("fileupload");b.url&&a.ajax(b);d._adjustMaxNumberOfFiles(1);d._transitionCallback(b.context.removeClass("in"),function(b){b.remove()})}},_enableDragToDesktop:function(){var c=a(this),b=c.prop("href"),d=decodeURIComponent(b.split("/").pop()).replace(/:/g,"-");c.bind("dragstart",function(a){try{a.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",d,b].join(":"))}catch(c){}})},_adjustMaxNumberOfFiles:function(a){"number"===typeof this.options.maxNumberOfFiles&&
(this.options.maxNumberOfFiles+=a,1>this.options.maxNumberOfFiles?this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" GB":1E6<=a?(a/1E6).toFixed(2)+" MB":(a/1E3).toFixed(2)+" KB"},_hasError:function(a){return a.error?a.error:0>this.options.maxNumberOfFiles?"maxNumberOfFiles":this.options.acceptFileTypes.test(a.type)||this.options.acceptFileTypes.test(a.name)?this.options.maxFileSize&&a.size>this.options.maxFileSize?
"maxFileSize":"number"===typeof a.size&&a.size<this.options.minFileSize?"minFileSize":null:"acceptFileTypes"},_validate:function(c){var b=this,d=!!c.length;a.each(c,function(a,c){c.error=b._hasError(c);c.error&&(d=!1)});return d},_renderTemplate:function(c,b){return a(this.options.templateContainer).html(c({files:b,formatFileSize:this._formatFileSize,options:this.options})).children()},_renderUpload:function(c){var b=this,d=this.options,e=this._renderTemplate(d.uploadTemplate,c);e.find(".preview span").each(function(e,
g){var h=c[e];d.previewFileTypes.test(h.type)&&(!d.previewMaxFileSize||h.size<d.previewMaxFileSize)&&window.loadImage(c[e],function(c){a(g).append(c);b._reflow=b._transition&&g.offsetWidth;a(g).addClass("in")},{maxWidth:d.previewMaxWidth,maxHeight:d.previewMaxHeight,canvas:d.previewAsCanvas})});return e},_renderDownload:function(a){a=this._renderTemplate(this.options.downloadTemplate,a);a.find("a").each(this._enableDragToDesktop);return a},_startHandler:function(c){c.preventDefault();c=a(this);var b=
c.closest(".template-upload").data("data");b&&b.submit&&!b.jqXHR&&b.submit()&&c.prop("disabled",!0)},_cancelHandler:function(c){c.preventDefault();var b=a(this).closest(".template-upload").data("data")||{};b.jqXHR?b.jqXHR.abort():(b.errorThrown="abort",c.data.fileupload._trigger("fail",c,b))},_deleteHandler:function(c){c.preventDefault();var b=a(this);c.data.fileupload._trigger("destroy",c,{context:b.closest(".template-download"),url:b.attr("data-url"),type:b.attr("data-type"),dataType:c.data.fileupload.options.dataType})},
_transitionCallback:function(a,b){var d=this;this._transition&&a.hasClass("fade")?a.bind(this._transitionEnd,function(e){e.target===a[0]&&(a.unbind(d._transitionEnd),b.call(d,a))}):b.call(this,a)},_initTransitionSupport:function(){var a=(document.body||document.documentElement).style,b="."+this.options.namespace;if(this._transition=void 0!==a.transition||void 0!==a.WebkitTransition||void 0!==a.MozTransition||void 0!==a.MsTransition||void 0!==a.OTransition)this._transitionEnd=["TransitionEnd","webkitTransitionEnd",
"transitionend","oTransitionEnd"].join(b+" ")+b},_initButtonBarEventHandlers:function(){var c=this.element.find(".fileupload-buttonbar"),b=this._files,d=this.options.namespace;c.find(".start").bind("click."+d,function(a){a.preventDefault();b.find(".start button").click()});c.find(".cancel").bind("click."+d,function(a){a.preventDefault();b.find(".cancel button").click()});c.find(".delete").bind("click."+d,function(a){a.preventDefault();b.find(".delete input:checked").siblings("button").click()});c.find(".toggle").bind("change."+
d,function(c){b.find(".delete input").prop("checked",a(this).is(":checked"))})},_destroyButtonBarEventHandlers:function(){this.element.find(".fileupload-buttonbar button").unbind("click."+this.options.namespace);this.element.find(".fileupload-buttonbar .toggle").unbind("change."+this.options.namespace)},_initEventHandlers:function(){a.blueimp.fileupload.prototype._initEventHandlers.call(this);var c={fileupload:this};this._files.delegate(".start button","click."+this.options.namespace,c,this._startHandler).delegate(".cancel button",
"click."+this.options.namespace,c,this._cancelHandler).delegate(".delete button","click."+this.options.namespace,c,this._deleteHandler);this._initButtonBarEventHandlers();this._initTransitionSupport()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._files.undelegate(".start button","click."+this.options.namespace).undelegate(".cancel button","click."+this.options.namespace).undelegate(".delete button","click."+this.options.namespace);a.blueimp.fileupload.prototype._destroyEventHandlers.call(this)},
_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){this.options.templateContainer=document.createElement(this._files.prop("nodeName"));this.options.uploadTemplate=window.tmpl("template-upload");this.options.downloadTemplate=window.tmpl("template-download")},_initFiles:function(){this._files=
this.element.find(".files")},_create:function(){this._initFiles();a.blueimp.fileupload.prototype._create.call(this);this._initTemplates()},destroy:function(){a.blueimp.fileupload.prototype.destroy.call(this)},enable:function(){a.blueimp.fileupload.prototype.enable.call(this);this.element.find("input, button").prop("disabled",!1);this._enableFileInputButton()},disable:function(){this.element.find("input, button").prop("disabled",!0);this._disableFileInputButton();a.blueimp.fileupload.prototype.disable.call(this)}})})(jQuery);
include.set_path("engines/FileUpload/resources");
(function(a){var c=0;a.ajaxTransport("iframe",function(b){if(b.async&&("POST"===b.type||"GET"===b.type)){var d,e;return{send:function(f,g){d=a('<form style="display:none;"></form>');e=a('<iframe src="javascript:false;" name="iframe-transport-'+(c+=1)+'"></iframe>').bind("load",function(){var c;e.unbind("load").bind("load",function(){var b;try{if(b=e.contents(),!b.length||!b[0].firstChild)throw Error();}catch(c){b=void 0}g(200,"success",{iframe:b});a('<iframe src="javascript:false;"></iframe>').appendTo(d);
d.remove()});d.prop("target",e.prop("name")).prop("action",b.url).prop("method",b.type);b.formData&&a.each(b.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(d)});b.fileInput&&b.fileInput.length&&"POST"===b.type&&(c=b.fileInput.clone(),b.fileInput.after(function(b){return c[b]}),b.paramName&&b.fileInput.each(function(){a(this).prop("name",b.paramName)}),d.append(b.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"));d.submit();
c&&c.length&&b.fileInput.each(function(b,d){var e=a(c[b]);a(d).prop("name",e.prop("name"));e.replaceWith(d)})});d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src","javascript".concat(":false;"));d&&d.remove()}}}});a.ajaxSetup({converters:{"iframe text":function(b){return a(b[0].body).text()},"iframe json":function(b){return a.parseJSON(a(b[0].body).text())},"iframe html":function(b){return a(b[0].body).html()},"iframe script":function(b){return a.globalEval(a(b[0].body).text())}}})})(jQuery);
include.set_path("engines/FileUpload/resources");(function(a){a.ajaxSetup({converters:{"iframe jsonp":function(c){return a.globalEval(a(c[0].body).text())}}})})(jQuery);include.set_path("engines/FileUpload/resources");(function(){window.tmpl=function(a){return function(c){var b=new FileUploadController;b.data=c;return b.render({action:a})}}})();include.next_function();include.set_path("engines/FileUpload/controllers");
FileUploadController=MVC.Controller.extend("FileUpload",{init:function(){window.fileUploadErrors={maxFileSize:"File is too big",minFileSize:"File is too small",acceptFileTypes:"Filetype not allowed",maxNumberOfFiles:"Max number of files exceeded",uploadedBytes:"Uploaded bytes exceed file size",emptyResult:"Empty file upload result"};this._super()}},{"FileUpload.initialize subscribe":function(a){this.data=a.data;this.render({to:this.data.element(),action:"initialize"});$(this.data.element()).fileupload({sequentialUploads:!0,
autoUpload:!0,forceIframeTransport:!0})},"FileUpload.add_files subscribe":function(a){this.data={};this.data.id=a.id;this.data.files=a.data;this.data.formatFileSize=function(){return"Unknown"};this.render({action:"template-download",to:$("tbody.files",$("#"+this.data.id))[0]})}});include.set_path("engines/FileUpload/views/FileUpload");
MVC.View.PreCompiledFunction("../views/FileUpload/initialize.ejs","engines/FileUpload/views/FileUpload/initialize.ejs",function(a,c){try{with(c)with(a){var b=[];b.push("<fieldset>\n");b.push('    <div class="title-wrap">\n');b.push('        <strong class="label">');b.push(MVC.View.Scanner.to_text(data.name));b.push(":</strong>\n");b.push("    </div>\n");b.push('    <div class="fileupload-buttonbar row">\n');b.push("        ");data.fields[0].readonly||(b.push("\n"),b.push('            <span class="fileinput-button">\n'),
b.push('                <span><button value="Add files...">Add files...</button></span>\n'),b.push('                <input type="file" name="files[]" multiple="true">\n'),b.push("            </span>\n"),b.push("        "));b.push("\n");b.push("    </div>\n");b.push('    <div class="ui-widget help-box">\n');b.push('        <div class="ui-state-highlight ui-corner-all help-content">\n');b.push("            <p>\n");b.push('                <span class="ui-icon ui-icon-info"></span>\n');b.push("                ");
b.push(MVC.View.Scanner.to_text(data.help));b.push("\n");b.push("            </p>\n");b.push("        </div>\n");b.push("    </div>\n");b.push('    <table class="category-table" cellpadding="0" cellspacing="0">\n');b.push("        <thead>\n");b.push("        <tr>\n");b.push('            <th class="image"></th>\n');b.push('            <th class="name">File name</th>\n');b.push('            <th class="price-holder">File size</th>\n');b.push('            <th class="info">Status</th>\n');b.push('            <th class="scroll"></th>\n');
b.push("        </tr>\n");b.push("        </thead>\n");b.push("    </table>\n");b.push('    <div class="category-table-holder">\n');b.push('        <table class="category-table" cellpadding="0" cellspacing="0">\n');b.push('            <tbody class="files"></tbody>\n');b.push("        </table>\n");b.push("    </div>\n");b.push("</fieldset>");return b.join("")}}catch(d){throw d.lineNumber=null,d;}});include.set_path("engines/FileUpload/views/FileUpload");
MVC.View.PreCompiledFunction("../views/FileUpload/template-upload.ejs","engines/FileUpload/views/FileUpload/template-upload.ejs",function(a,c){try{with(c)with(a){for(var b=[],d=0,e=data.files,f=e.length,g=e[0];d<f;g=e[++d])b.push("\n"),b.push('<tr class="template-upload file-row" >\n'),b.push('    <td class="image"></td>\n'),b.push('    <td class="name">'),b.push(MVC.View.Scanner.to_text(g.name)),b.push("</td>\n"),b.push('    <td class="price-holder">\n'),b.push('        <strong class="price">'),
b.push(MVC.View.Scanner.to_text(data.formatFileSize(g.size))),b.push("</strong>\n"),b.push("    </td>\n"),b.push("        "),g.error?(b.push("\n"),b.push('    <td class="error">\n'),b.push('        <div style="padding: 0px 0.7em;" class="ui-state-error ui-corner-all">\n'),b.push('            <p><span style="margin-right: 0.3em; float: left;" class="ui-icon ui-icon-alert"></span>\n'),b.push("                <strong>Error:</strong> "),b.push(MVC.View.Scanner.to_text(fileUploadErrors[g.error]||g.error)),
b.push("</p>\n"),b.push("        </div>\n"),b.push("    </td>\n")):(b.push("\n"),b.push('    <td><div class="progressbar"><div style="width:0%;"></div></div></td>\n')),b.push("        "),b.push("\n"),b.push("    <td></td>\n"),b.push("</tr>\n");b.push("\n");$("tr.file-row:odd").addClass("odd");return b.join("")}}catch(h){throw h.lineNumber=null,h;}});include.set_path("engines/FileUpload/views/FileUpload");
MVC.View.PreCompiledFunction("../views/FileUpload/template-download.ejs","engines/FileUpload/views/FileUpload/template-download.ejs",function(a,c){try{with(c)with(a){var b=[];b.push("    ");for(var d=0,e=data.files,f=e.length,g=e[0];d<f;g=e[++d])b.push("\n"),b.push('    <tr class="template-download file-row">\n'),b.push('        <td class="image">\n'),b.push("            "),g.thumbnail_url&&(b.push("\n"),b.push('            <img src="'),b.push(MVC.View.Scanner.to_text(g.thumbnail_url)),b.push('">\n'),
b.push("            ")),b.push("\n"),b.push("        </td>\n"),b.push('        <td class="name"><a href="'),b.push(MVC.View.Scanner.to_text(g.url)),b.push('" title="'),b.push(MVC.View.Scanner.to_text(g.name)),b.push('" rel="gallery">'),b.push(MVC.View.Scanner.to_text(g.name)),b.push("</a></td>\n"),b.push('        <td class="price-holder"><strong class="price">'),b.push(MVC.View.Scanner.to_text(data.formatFileSize(g.size))),b.push("</strong></td>\n"),b.push("        "),g.error?(b.push("\n"),b.push('        <td class="error">\n'),
b.push('            <div style="padding: 0px 0.7em;" class="ui-state-error ui-corner-all">\n'),b.push('                <p><span style="margin-right: 0.3em; float: left;" class="ui-icon ui-icon-alert"></span>\n'),b.push("                    <strong>Error:</strong> "),b.push(MVC.View.Scanner.to_text(fileUploadErrors[g.error]||g.error)),b.push("</p>\n"),b.push("            </div>\n"),b.push("        </td>\n")):(b.push("\n"),b.push("        <td><strong>Successfully uploaded</strong></td>\n")),b.push("        "),
b.push("\n"),b.push("        <td></td>\n"),b.push("\x3c!--\n"),b.push('        <td class="delete">\n'),b.push('            <button class="btn danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">Delete</button>\n'),b.push('            <input type="checkbox" name="delete" value="1">\n'),b.push("        </td>\n"),b.push("--\x3e\n"),b.push("    </tr>\n"),b.push("\n"),b.push("    ");b.push("\n");b.push("    ");$("tr.file-row:odd").addClass("odd");return b.join("")}}catch(h){throw h.lineNumber=
null,h;}});include.set_path("engines/MdlDialog/apps");include.resources("jquery.custom");include.plugins("controller","controller/scaffold","controller/stateful","view","view/helpers","dom/element","model");include(function(){include.models("MdlDialog");include.controllers("MdlDialog");include.views("views/MdlDialog/init","views/MdlDialog/default_model")});include.set_path("engines/MdlDialog/resources");
$.fn.serializeObject=function(){var a={},c=this.serializeArray();$.each(c,function(){void 0!==a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""});$("input[type=file]",this).each(function(){a[this.name]=this.files});return a};include.set_path("jmvc/plugins/model");include.plugins("lang/class","lang/openajax");include("simple_store");include("model");include.set_path("jmvc/plugins/model");
MVC.Store=MVC.Class.extend({init:function(a){this._data={};this.storing_class=a},find_one:function(a){return a?this._data[a]:null},create:function(a){this._data[a[a.Class.id]]=a},destroy:function(a){delete this._data[a]},find:function(a){var c=[],b;for(b in this._data){var d=this._data[b];a&&!a(d)||c.push(d)}return c},clear:function(){this._data={}},is_empty:function(){return!this.find().length}});include.set_path("jmvc/plugins/model");
MVC.Model=MVC.Class.extend({store_type:MVC.Store,init:function(){if(this.className){MVC.Model.models[this.className]=this;this.store=new this.store_type(this);for(var a in this.associations)if(this.associations.hasOwnProperty(a))switch(a){case "has_many":this.has_many.apply(this,this.associations.has_many);break;case "has":this.has.apply(this,this.associations.has);break;default:throw"Unknown association "+a;}}},find:function(a,c,b){c||(c={});"function"==typeof c&&(b=c);c=this._clean_callbacks(b);
return this.store.find_one(a,c)},find_all:function(a,c){var b;"function"==typeof a&&(b=a);a&&a.filter&&"function"==typeof a.filter&&(b=a.filter);return this.store.find(b)},asynchronous:!0,create:function(a,c){this._clean_callbacks(c).onSuccess(this.create_as_existing(a))},update:function(a,c,b){this._clean_callbacks(b).onSuccess(this.find(a))},create_as_existing:function(a){if(!a)return null;a.attributes&&(a=a.attributes());a=new this(a);a.is_new_record=this.new_record_func;this.publish("create.as_existing",
{data:a});return a},create_many_as_existing:function(a){var c=[];if(!a)return c;for(var b=0;b<a.length;b++)c.push(this.create_as_existing(a[b]));return c},id:"id",new_record_func:function(){return!1},validations:[],has_many:function(){for(var a=0;a<arguments.length;a++)this._associations.push(MVC.String.pluralize(arguments[a]))},has:function(){for(var a=0;a<arguments.length;a++)this._associations.push(arguments[a])},belongs_to:function(){for(var a=0;a<arguments.length;a++)this._associations.push(arguments[a])},
associations:{has_many:[],has:[]},_associations:[],element_id_to_id:function(a){return a.replace(new RegExp(this.className+"_","i"),"")},find_by_element:function(a){return this._find_by_element(MVC.$E(a),this.className,this)},_find_by_element:function(a,c,b){var d;c=new RegExp("^"+c+"_(.*)$");a=a&&a.id&&(d=a.id.match(c))&&1<d.length?d[1]:a.has_class(c)[1];return b.store.find_one(a)},add_attribute:function(a,c){this.attributes[a]||(this.attributes[a]=c);this.default_attributes[a]||(this.default_attributes[a]=
null)},attributes:{},default_attributes:{},_clean_callbacks:function(a){a||(a=function(){});if("function"==typeof a)return{onSuccess:a,onFailure:a};if(!a.onSuccess&&!a.onComplete)throw"You must supply a positive callback!";a.onSuccess||(a.onSuccess=a.onComplete);!a.onFailure&&a.onComplete&&(a.onFailure=a.onComplete);return a},models:{},callback:function(a){var c="string"==typeof a?this[a]:a,b=MVC.Array.from(arguments);b.shift();b.unshift(c,this);return MVC.Function.bind.apply(null,b)},publish:function(a,
c){OpenAjax.hub.publish(this.className+"."+a,c)},namespace:null},{init:function(a){this.errors=[];this.set_attributes(this.Class.default_attributes||{});this.set_attributes(a)},set_attributes:function(a){for(var c in a)a.hasOwnProperty(c)&&this._setAttribute(c,a[c]);return a},update_attributes:function(a,c){this.set_attributes(a);return this.save(c)},valid:function(){return 0==this.errors.length},validate:function(){},_setAttribute:function(a,c){MVC.Array.include(this.Class._associations,this.Class.attributes[a])?
this._setAssociation(a,c):this._setProperty(a,c)},_setProperty:function(a,c){if(!this["set_"+a]||this["set_"+a](c)){var b=this[a];this[a]=MVC.Array.include(["created_at","updated_at"],a)?MVC.Date.parse(c):c;a==this.Class.id&&this[a]&&(this.is_new_record=this.Class.new_record_func,this.Class.store)&&(b?b!=this[a]&&(this.Class.store.destroy(b),this.Class.store.create(this)):this.Class.store.create(this));this.Class.add_attribute(a,MVC.Object.guess_type(c))}},_setAssociation:function(a,c){var b=this.Class.attributes[a],
d=!MVC.String.is_singular(b),b=d?window[MVC.String.singularize(b)]:window[b];this[a]=b?d?b.create_many_as_existing(c):b.create_as_existing(c):c},attributes:function(){var a={},c=this.Class.attributes,b;for(b in c)c.hasOwnProperty(b)&&(MVC.Array.include(this.Class._associations,this.Class.attributes[b])?a[b]=this[b].attributes():a[b]=this[b]);return a},is_new_record:function(){return!0},save:function(a){this.errors=[];this.validate();if(!this.valid())return!1;this.is_new_record()?this.Class.create(this.attributes(),
a):this.Class.update(this[this.Class.id],this.attributes(),a);this.is_new_record=this.Class.new_record_func;return!0},destroy:function(a){this.Class.store.destroy(this[this.Class.id]);this.Class.destroy(this[this.Class.id],a)},add_errors:function(a){a&&(this.errors=this.errors.concat(a))},_resetAttributes:function(a){this._clear()},_clear:function(){var a=this.Class.default_attributes,c;for(c in a)a.hasOwnProperty(c)&&(this[c]=null)},element_id:function(){return this.Class.className+"_"+this[this.Class.id]},
element:function(){return MVC.$E(this.element_id())},elements:function(){return MVC.Query("."+this.element_id())},publish:function(a,c){this.Class.publish(a,c||{data:this})},callback:function(a){var c="string"==typeof a?this[a]:a,b=MVC.Array.from(arguments);b.shift();b.unshift(c,this);return MVC.Function.bind.apply(null,b)}});
MVC.Object.guess_type=function(a){return"string"!=typeof a?null==a?typeof a:a.constructor==Date?"date":a.constructor==Array?"array":typeof a:"true"==a||"false"==a?"boolean":isNaN(a)?typeof a:"number"};MVC._no_conflict||"undefined"!=typeof Model||(Model=MVC.Model);include.next_function();include.set_path("engines/MdlDialog/models");
MVC.Model.MdlDialog=MVC.Model.extend("MVC.Model.MdlDialog",{attributes:{titel:"String",header:"String"},default_attributes:{titel:"Empty dialog",header:"Empty dialog"}},{view:null,set_view:function(a){this.view=new View({url:a})},_onOpen:function(a){$("div.mdlDlg_model_container",a).html(this.view.render(this))},_onClose:function(){}});MVC._no_conflict||"undefined"!=typeof Model.MdlDialog||(Model.MdlDialog=MVC.Model.MdlDialog);include.set_path("engines/MdlDialog/controllers");
MVC.MdlDialog=MVC.Controller.Stateful.extend("MdlDialog",{id:0,default_options:{autoOpen:!1,height:300,width:350,modal:!0,buttons:{Cancel:function(){$(this).dialog("close")}},close:function(){}}},{init:function(a,c){this.id="mdlDlg_"+ ++this.Class.id;this.model=a;this.options={};MVC.Object.extend(this.options,this.Class.default_options);MVC.Object.extend(this.options,c);MVC.Object.extend(this.options.buttons,{Confirm:this._onConfirm()});this.render({bottom:document.body,action:"init"});this._super(MVC.$E(this.id));
this.$element=$(this.element);this.$form=$("form",this.$element);this.$form.validationEngine();this.$element.dialog(this.options)},open:function(){this.model._onOpen(this.$element);this.$element.dialog("open")},_onConfirm:function(){return MVC.Function.bind(function(){if(this.$form.validationEngine("validate")){var a=this.$form.serializeObject(),c=this.model;if(c.update_attributes(a))this.$element.dialog("close"),this.options.onSuccess(this.model);else{var b=$(".validateTips",this.$element);b.addClass("ui-state-highlight");
b.text("");$.each(c.errors.splice(0,c.errors.length),function(a,c){b.append(c).append("<br/>")});setTimeout(function(){b.text(c.header).removeClass("ui-state-highlight",1500)},5E3)}}},this)}});include.set_path("engines/MdlDialog/views/MdlDialog");
MVC.View.PreCompiledFunction("../views/MdlDialog/init.ejs","engines/MdlDialog/views/MdlDialog/init.ejs",function(a,c){try{with(c)with(a){var b=[];b.push('<div id="');b.push(MVC.View.Scanner.to_text(id));b.push('" title="');b.push(MVC.View.Scanner.to_text(model.titel));b.push('" style="display: none;">\n');b.push('    <p class="validateTips">');b.push(MVC.View.Scanner.to_text(model.header));b.push("</p>\n");b.push("    <form>\n");b.push("        <fieldset>\n");b.push('            <div class="mdlDlg_model_container">\n');
b.push("                \x3c!--is updated when dialog opens--\x3e\n");b.push("            </div>\n");b.push("        </fieldset>\n");b.push("    </form>\n");b.push("</div>");return b.join("")}}catch(d){throw d.lineNumber=null,d;}});include.set_path("engines/MdlDialog/views/MdlDialog");
MVC.View.PreCompiledFunction("../views/MdlDialog/default_model.ejs","engines/MdlDialog/views/MdlDialog/default_model.ejs",function(a,c){try{with(c)with(a){var b=[];b.push("<p>\n");b.push("    This is the default empty dialog model.\n");b.push("</p>");return b.join("")}}catch(d){throw d.lineNumber=null,d;}});include.set_path("jmvc/plugins/model/jsonp");include.plugins("model","lang/date","io/jsonp");include("remote_model");include.set_path("jmvc/plugins/lang/date");
(function(){var a=Date.parse;MVC.Native.extend("Date",{add_days:function(a,b){a.setDate(a.getDate()+b);return a},add_weeks:function(a,b){return MVC.Date.add_days(a,7*b)},day_name:function(a){return MVC.Date.day_names[a.getDay()]},first_day_of_week:function(a){var b=new Date(a);b.setDate(a.getDate()-a.getDay());return b},month_name:function(a){return MVC.Date.month_names[a.getMonth()]},number_of_days_in_month:function(a){var b=a.getFullYear();a=a.getMonth();var d=[31,28,31,30,31,30,31,31,30,31,30,
31];return 1!=a?d[a]:0!=b%4||0==b%100&&0!=b%400?d[1]:d[1]+1},day_names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),month_names:"January February March April May June July August September October November December".split(" "),parse:function(c){if("string"!=typeof c)return null;var b=/\d{4}-\d{1,2}-\d{1,2}/,d=/\d{4}\/\d{1,2}\/\d{1,2}/,e;return(e=c.match(/(\d{4})[-\/](\d{1,2})[-\/](\d{1,2})\s(\d{1,2}):(\d{1,2}):(\d{1,2})/))?new Date(Date.UTC(parseInt(e[1],10),parseInt(e[2],
10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),parseInt(e[6],10))):c.match(b)?(c=c.match(b)[0].split("-"),new Date(Date.UTC(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10)))):c.match(d)?(c=c.match(d)[0].split("/"),new Date(Date.UTC(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10)))):a(c)}})})();MVC.Native.Date=MVC.Date;include.set_path("jmvc/plugins/io/jsonp");include.plugins("lang");include("jsonp");include.set_path("jmvc/plugins/io/jsonp");
MVC.JsonP=function(a,c){this.url=a;this.options=c||{};this.remove_script=0==this.options.remove_script?!1:!0;this.options.parameters=this.options.parameters||{};this.error_timeout=1E3*this.options.error_timeout||7E4;this.send()};
MVC.JsonP.prototype={send:function(){var a="c"+MVC.get_random(5);if(this.options.session){var c="function"==typeof this.options.session?this.options.session():this.options.session;this.url+=(MVC.String.include(this.url,";")?"&":";")+MVC.Object.to_query_string(c)}c="function"==typeof this.options.parameters?this.options.parameters():this.options.parameters;this.url+=(MVC.String.include(this.url,"?")?"&":"?")+MVC.Object.to_query_string(c);this.add_method();var b=this.callback_and_random(a),d=this.check_error(this.url,
this.options.onFailure);MVC.JsonP._cbs[b]=MVC.Function.bind(function(a){clearTimeout(d);this.remove_scripts();delete MVC.JsonP._cbs[b];var c={};null==a?c.responseText="":"string"==typeof a?c.responseText=a:(c=a,c.responseText=a.toString());a=!0;this.options.onSuccess&&(a=this.options.onSuccess(c));if(this.options.onComplete&&a)this.options.onComplete(c)},this);include({path:this.url})},add_method:function(){this.options.method&&"get"!=this.options.method&&(this.url+="&_method="+this.options.method)},
callback_and_random:function(a){this.options.callback="MVC.JsonP._cbs."+a;this.url+="&cbk="+this.options.callback;return a},check_error:function(a,c){return setTimeout(function(){if(c)c(a);else throw"URL:"+a+" timedout!";},this.error_timeout)},remove_scripts:function(){this.remove_script&&setTimeout(MVC.Function.bind(this._remove_scripts,this),2E3)},_remove_scripts:function(){for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++){var b=a[c];MVC.String.include(b.src.toLowerCase(),this.url.toLowerCase())&&
b.parentNode.removeChild(b)}}};MVC.JsonP._cbs={};MVC.IO.JsonP=MVC.JsonP;include.set_path("jmvc/plugins/model/jsonp");
MVC.Model.JsonP=MVC.Model.extend({error_timeout:4,init:function(){if(this.className){if(!this.domain)throw"a domain must be provided for remote model";this.controller_name||(this.controller_name=this.className);this.plural_controller_name=MVC.String.pluralize(this.controller_name);this._super()}},find_all:function(a,c){var b=this._clean_callbacks(c),d=b.onSuccess,e=b.onFailure;this.add_standard_params(a,"find_all");parseInt(1E5*Math.random());b=this.find_url?this.find_url+"?":this.domain+"/"+this.plural_controller_name+
".json?";d||(d=function(){});new MVC.JsonP(b,{error_timeout:this.error_timeout,parameters:a,onFailure:e,onComplete:MVC.Function.bind(function(b){var a=this.create_many_as_existing(b);b.errors?e(a):d(a)},this),method:"get"})},create:function(a,c){var b=this._clean_callbacks(c),d=b.onSuccess,b=b.onFailure;this.add_standard_params(a,"create");var e=this.create_url?this.create_url+"?":this.domain+"/"+this.plural_controller_name+".json?",f=this.top_level_length(a,e),f=this.seperate(a[this.controller_name],
f,this.controller_name),g=f.postpone,h=f.send;d||(d=function(){});a._method="POST";f.send_in_parts?(a[this.controller_name]=h,a._mutlirequest="true",new MVC.JsonP(e,{error_timeout:this.error_timeout,parameters:a,onComplete:MVC.Function.bind(this.parts_create_callback(a,d,g),this),onFailure:b,method:"post"})):(a._mutlirequest=null,new MVC.JsonP(e,{error_timeout:this.error_timeout,parameters:a,onComplete:MVC.Function.bind(this.single_create_callback(d,b),this),onFailure:b,method:"post"}))},update:function(a,
c,b){var d={};d[this.id]=a;MVC.Object.extend(d,c);this.add_standard_params(d,"update");this.create(d,b)},destroy:function(a,c){var b={};b[this.id]=a;var d=this._clean_callbacks(c),e=d.onSuccess,d=d.onFailure;this.add_standard_params(b,"delete");parseInt(1E5*Math.random());var f=this.destroy_url?this.destroy_url+"?":this.domain+"/"+this.plural_controller_name+".json?";e||(e=function(){});new MVC.JsonP(f,{error_timeout:this.error_timeout,parameters:b,onFailure:d,onComplete:MVC.Function.bind(this.standard_callback(e,
d),this),method:"delete"})},standard_callback:function(a,c){return function(b){b.errors?c(b.errors):a(b)}},parts_create_callback:function(a,c,b){return function(d){if(!d.id)throw"Your server must callback with the id of the object.  It is used for the next request";a[this.controller_name]=b;a.id=d.id;this.create(a,c)}},single_create_callback:function(a,c){return function(b){if(b.errors){var d=new this(b[this.className]?b[this.className]:{});d.add_errors(b.errors);c(d)}else a(this.create_as_existing(b))}},
create_many_as_existing:function(a){return a?a.errors?[this.create_as_existing(a)]:this._super(a):[]},add_standard_params:function(a,c){a.referer||(a.referer=window.location.href);a.action||(a.action=c)},callback_name:"callback",domain:null,top_level_length:function(a,c){var b=MVC.Object.extend({},a);delete b[this.controller_name];return c.length+MVC.Object.to_query_string(b).length},seperate:function(a,c,b){c=1991-c;var d={},e={},f=!1,g;for(g in a)if(a.hasOwnProperty(g)){var h=a[g],k,l=encodeURIComponent(b+
"["+g+"]").length;k="string"==typeof h?encodeURIComponent(h).length:h.toString().length;if(30>=c-l)e[g]=h,f=!0;else if(c=c-l-2,c>k)d[g]=h,c-=k;else if("string"==typeof h){for(f=c;encodeURIComponent(h.substr(0,f)).length>c;)f=parseInt(.75*f)-1;d[g]=h.substr(0,f);e[g]=h.substr(f);f=!0;c=0}else e[g]=h}return{send:d,postpone:e,send_in_parts:f}},random:parseInt(1E6*Math.random())},{});include.set_path("jmvc/plugins/io/ajax");include.plugins("lang");include("jquery_ajax");
"test"==include.get_env()&&MVC.Browser.Rhino&&include("fixtures/setup");include.set_path("jmvc/plugins/io/ajax");
(function(){var a=MVC.Ajax.factory;MVC.Ajax=function(a,b){b.url=a;this.transport={};b.complete=MVC.Ajax.get_complete_option(b);null!=b.asynchronous&&(b.async=b.asynchronous);b.parameters&&(b.data=b.parameters);b.method&&(b.type=b.method);this.options=b;this.url=a;return b.async?jQuery.ajax(b):{transport:jQuery.ajax(b)}};MVC.Ajax.get_complete_option=function(a){return function(b,d){if(a.onComplete)a.onComplete(b);if(a.onSuccess&&"success"==d)a.onSuccess(b);if(a.onFailure&&"error"==d)a.onFailure(b)}};
MVC.Ajax.factory=a})();MVC._no_conflict||(Ajax=MVC.Ajax);include.next_function();include.set_path("models/main");DataSet=MVC.Model.JsonP.extend("DataSet",{gDataSetName:"",domain:ApplicationContext.domain,id:"name",attributes:{name:"string"}},{responseText:{},set_responseText:function(a){this.responseText=a},attributes:function(){var a=this._super(),c={},b;for(b in a)a.hasOwnProperty(b)&&a[b]&&(c[b]=a[b]);return c}});include.set_path("models/main");
WelcomeStep=MVC.Model.extend("WelcomeStep",{attributes:{id:"string",help:"string",data:"String[]"},default_attributes:{id:"frmWelcome",help:"Choose or create a new dataset. When creating a new one make sure that its name is file name compatible.",data:[]},view:"views/main/WelcomeStep.ejs",create:function(a,c){this.create_as_existing(a).refresh(this._clean_callbacks(c))}},{validate:function(){var a=$(this.element());return 0==$("input[name=datasets]:checked",a).length&&"false"===$("#flgCreateNew",
a).val()?(noty.error("Choose data set or create a new one!"),!1):!0},update:function(){var a=$(this.element()),c,b;"true"===$("#flgCreateNew",a).val()?(c=$("#hdnNewDataSetName",a).val(),b=$("#hdnTmplName",a).val()):(c=$("input[name=datasets]:checked",a).val(),b="none");DataSet.gDataSetName=c;DataSet.create({name:c,template:b},{onComplete:function(b){$("#flgCreateNew",a).val(!1);$("form.step").each(function(){var a=WizardStep.element_id_to_id($(this).attr("id")),a=WizardStep.find(a);null!=a&&a.refresh(b)});
noty.success("Data has been loaded successfully")},onFailure:function(a){noty.error(a+" does not respond")}})},toHtml:function(){return(new View({url:this.Class.view})).render(this)}});include.set_path("models/main");
WizardStep=MVC.Model.JsonP.extend("WizardStep",{find_url:ApplicationContext.domain+"/Meta.json",domain:ApplicationContext.domain,attributes:{id:"string",help:"text",label:"string",type:"string",fields:"Object[]",values:"{}"},default_attributes:{values:{}},view:"views/main/wizard.step.###.ejs"},{refresh:function(a){var c=this.element_id();"upload"==this.type?$.each(this.fields,function(b,d){if(a[d.id]){var e=$.map(a[d.id],function(a){return{name:a,url:ApplicationContext.domain+"/home/"+ApplicationContext.userName+
"/upload/"+a}});Controller.publish("FileUpload.add_files",{id:c,data:e})}}):$.each(this.fields,function(b,c){$(MVC.$E(c.id)).val(a[c.id]);c.fields&&$.each(c.fields,function(b,c){$(MVC.$E(c.id)).val(a[c.id])})})},update:function(){var a=$(this.element()),c={name:DataSet.gDataSetName};$.each(this.fields,function(b,d){"file"==this.type?(c[d.id]=[],$("tr.file-row > td.name",a).each(function(){c[d.id].push($(this).text())})):c[d.id]=$(MVC.$E(d.id)).val();d.fields&&$.each(d.fields,function(a,b){c[b.id]=
$(MVC.$E(b.id)).val()})});console.log("Updating dataset["+DataSet.gDataSetName+"]");DataSet.find(DataSet.gDataSetName).update_attributes(c,{onComplete:function(){console.log("Data has been updated successfully!");noty.alert("Data has been updated successfully!")},onFailure:function(a){console.error("ERR: update has failed!");noty.error("ERR: update has failed!");for(var c=0,e=a.errors.length;c<e;++c)console.error(a.errors[c]),noty.error(a.errors[c])}})},validate:function(){return $(this.element()).validationEngine("validate")},
toHtml:function(){return(new View({url:this.Class.view.replace("###",this.type)})).render(this,WizardStepViewHelpers)}});include.set_path("models/main");
FinalStep=MVC.Model.extend("FinalStep",{attributes:{id:"string",help:"string"},default_attributes:{id:"frmFinal",help:"This demonstrates all the values from the dataset that were actually downloaded from the server. Please review them carefully. If you find a mistake you can navigate to the corresponding Wizard step and correct the value."},view:"views/main/FinalStep.ejs"},{activate:function(){DataSet.create({name:DataSet.gDataSetName},{onComplete:function(a){if(a.errors&&0<a.errors.length)$.each(a.errors,
function(b){noty.error(a.errors[b])});else{var c=$(MVC.$E("dataHolder")),b=[],d=new View({url:"views/main/final.value.ejs"}),e;for(e in a.attributes())b.push(d.render({fld_id:e,value:a[e]}));c.html(b.join("<br/>"));noty.success("Data has been successfully stored")}},onFailure:function(a){noty.error(a+" does not respond")}})},toHtml:function(){return(new View({url:this.Class.view})).render(this)}});include.set_path("controllers");MainController=MVC.Controller.extend("main",{},{load:function(){InitHelper(function(){noty.alert("Application has been initialized successfully.")})}});
include.set_path("controllers");WizardController=MVC.Controller.extend("Wizard",{wizard:null,newWizardEngine:function(){return this.wizard=new WizardEngine("Wizard","PreExperiment Data Collector")},initialize:function(){this.wizard.initialize()}},{"Wizard.submit subscribe":function(){this.Class.wizard.$element.wizard("select",0)}});include.set_path("controllers/main");
WelcomeController=MVC.Controller.extend("rows",{dlgCreate:null,dlgUpload:null},{"DataSet.create.as_existing subscribe":function(a){a=a.data;var c=WelcomeStep.find_by_element(MVC.$E("WelcomeStep_frmWelcome"));if(!(-1<$.inArray(a.name,c.data))){console.log("DataSet["+a.name+"] has been created");var b=$((new View({url:"views/main/Welcome/dataset_row.ejs"})).render(a)),d=$(c.element());$("div.form-box",d).prepend(b);c.data.push(a.name)}},"a.delete click":function(a){a=$(a.element).parent();var c=$("input[type=radio]",
a).val();a.remove();DataSet.find(c).destroy({onComplete:function(){var a=WelcomeStep.find_by_element(MVC.$E("WelcomeStep_frmWelcome")),d=$.inArray(c,a.data);console.log("Dataset has been found at index="+d);a.data.splice(d,1);DataSet.gDataSetName="";noty.success("Dataset["+c+"] has been deleted.")},onFailure:function(a){noty.error(a+" does not respond")}})},"a#btnCreate click":function(){var a=WelcomeStep.find_by_element(MVC.$E("WelcomeStep_frmWelcome"));this.Class.dlgCreate||(this.Class.dlgCreate=
new MVC.MdlDialog(new MVC.Model.MdlDialog({titel:"Create a new DataSet",header:"Please enter a name:",view:"views/main/Welcome/create.ejs",data:a.data,name:null,template:null}),{onSuccess:function(a){$("#hdnNewDataSetName").val(a.name);$("#hdnTmplName").val(a.template);$("#flgCreateNew").val(!0);WizardController.wizard.$next.click()}}));this.Class.dlgCreate.open()},"a#btnUpload click":function(){if(!this.Class.dlgUpload){var a=MVC.Model.MdlDialog.extend({_onOpen:function(a){$("div.mdlDlg_model_container",
a).append($(this.view.render(this)));Controller.publish("FileUpload.initialize",{data:this})}});this.Class.dlgUpload=new MVC.MdlDialog(new a({id:"mdlDlgUploadDataSets",name:"Choose files to upload:",fields:[{type:"file",id:"fldUploadDataSets"}],help:"Please select datasets created in the offline.",titel:"Upload DataSets",header:"",view:"views/main/Welcome/upload.ejs"}),{height:680,width:980,onSuccess:function(a){DataSet.find_all({onComplete:function(){noty.success("Data has been successfully uploaded.")},
onFailure:function(){noty.error("Data upload has failed")}})}})}this.Class.dlgUpload.open()}});include.set_path("views/main");
MVC.View.PreCompiledFunction("../views/main/WelcomeStep.ejs","views/main/WelcomeStep.ejs",function(a,c){try{with(c)with(a){var b=[];b.push('<form class="step regular-form" id="WelcomeStep_frmWelcome">\n');b.push("    <fieldset>\n");b.push('        <div class="title-wrap">\n');b.push('            <strong class="label">Welcome</strong>\n');b.push("        </div>\n");b.push('        <div class="form-box">\n');b.push('            <div class="row" id="rowCreateNew">\n');b.push('                <input type="hidden" id="flgCreateNew" value="false"/>\n');
b.push('                <input type="hidden" id="hdnNewDataSetName" value=""/>\n');b.push('                <input type="hidden" id="hdnTmplName" value=""/>\n');b.push('                <a href="javascript:void(0)" onclick="return false;" id="btnCreate" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" title="Create new...">\n');b.push('                    <span class="ui-button-icon-primary ui-icon ui-icon-circle-plus"></span>\n');b.push('                    <span class="ui-button-text">Create new...</span>\n');
b.push("                </a>\n");b.push("            </div>\n");b.push('            <div class="row" id="rowUpload">\n');b.push('                <a href="javascript:void(0)" onclick="return false;" id="btnUpload" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" title="Upload DataSets from offline client...">\n');b.push('                    <span class="ui-button-icon-primary ui-icon ui-icon-disk"></span>\n');b.push('                    <span class="ui-button-text">Upload DataSets from offline client...</span>\n');
b.push("                </a>\n");b.push("            </div>\n");b.push("        </div>\n");b.push('        <div class="ui-widget help-box">\n');b.push('            <div class="ui-state-highlight ui-corner-all help-content">\n');b.push("                <p>\n");b.push('                    <span class="ui-icon ui-icon-info"></span>\n');b.push("                    ");b.push(MVC.View.Scanner.to_text(help));b.push("\n");b.push("                </p>\n");b.push("            </div>\n");b.push("        </div>\n");
b.push("    </fieldset>\n");b.push("</form>");return b.join("")}}catch(d){throw d.lineNumber=null,d;}});include.set_path("views/main");
MVC.View.PreCompiledFunction("../views/main/FinalStep.ejs","views/main/FinalStep.ejs",function(a,c){try{with(c)with(a){var b=[];b.push('<form class="step regular-form submit" id="FinalStep_frmFinal">\n');b.push("    <fieldset>\n");b.push('        <div class="title-wrap">\n');b.push('            <strong class="label">Final review:</strong>\n');b.push("        </div>\n");b.push('        <div class="form-box">\n');b.push('            <div class="row" style="height: 480px;width:320px;">\n');b.push('                <div id="dataHolder" style="height: 100%;width:100%;overflow:auto;"></div>\n');
b.push("            </div>\n");b.push("        </div>\n");b.push('        <div class="ui-widget help-box">\n');b.push('            <div class="ui-state-highlight ui-corner-all help-content">\n');b.push("                <p>\n");b.push('                    <span class="ui-icon ui-icon-info"></span>\n');b.push("                    ");b.push(MVC.View.Scanner.to_text(help));b.push("\n");b.push("                </p>\n");b.push("            </div>\n");b.push("        </div>\n");b.push("    </fieldset>\n");
b.push("</form>");return b.join("")}}catch(d){throw d.lineNumber=null,d;}});include.set_path("views/main");
MVC.View.PreCompiledFunction("../views/main/wizard.step.field.ejs","views/main/wizard.step.field.ejs",function(a,c){try{with(c)with(a){var b=[];b.push('<div class="row">\n');b.push('    <a title="');b.push(MVC.View.Scanner.to_text(description));b.push('"><label for="');b.push(MVC.View.Scanner.to_text(id));b.push('" class="');b.push(MVC.View.Scanner.to_text(isRequired(validation)?"required":"normal"));b.push('">');b.push(MVC.View.Scanner.to_text(name));b.push(MVC.View.Scanner.to_text(printAsterisk(validation)));
b.push(":</label></a>\n");b.push("    ");b.push(MVC.View.Scanner.to_text(printInput(type,id,validation,readonly,values)));b.push("\n");b.push("</div>");return b.join("")}}catch(d){throw d.lineNumber=null,d;}});include.set_path("views/main");
MVC.View.PreCompiledFunction("../views/main/wizard.step.fieldset.ejs","views/main/wizard.step.fieldset.ejs",function(a,c){try{with(c)with(a){var b=[];b.push('<form class="step regular-form" id="');b.push(MVC.View.Scanner.to_text(element_id()));b.push('" type="fieldset">\n');b.push("    <fieldset>\n");b.push('        <div class="title-wrap">\n');b.push('            <strong class="label">');b.push(MVC.View.Scanner.to_text(name));b.push(":</strong>\n");b.push("        </div>\n");b.push('        <div class="form-box">\n');
b.push("            ");$.each(fields,function(a,c){b.push("\n");b.push("            ");b.push(MVC.View.Scanner.to_text(printField(a,c,values)));b.push("\n");b.push("            ")});b.push("\n");b.push("        </div>\n");b.push('        <div class="ui-widget help-box">\n');b.push('            <div class="ui-state-highlight ui-corner-all help-content">\n');b.push("                <p>\n");b.push('                    <span class="ui-icon ui-icon-info"></span>\n');b.push("                    ");b.push(MVC.View.Scanner.to_text(help));
b.push("\n");b.push("                </p>\n");b.push("            </div>\n");b.push("        </div>\n");b.push("    </fieldset>\n");b.push("</form>");return b.join("")}}catch(d){throw d.lineNumber=null,d;}});include.set_path("views/main");
MVC.View.PreCompiledFunction("../views/main/wizard.step.multichoice.ejs","views/main/wizard.step.multichoice.ejs",function(a,c){try{with(c)with(a){var b=[];b.push('<form class="step regular-form" id="');b.push(MVC.View.Scanner.to_text(element_id()));b.push('" type="');b.push(MVC.View.Scanner.to_text(type));b.push('">\n');b.push("    <fieldset>\n");b.push('        <div class="title-wrap">\n');b.push('            <strong class="label">');b.push(MVC.View.Scanner.to_text(name));b.push(":</strong>\n");
b.push("        </div>\n");b.push('        <div class="form-box">\n');b.push('            <div class="accordion">\n');b.push("                ");for(var d=0,e=fields.length;d<e;d++){b.push("\n");b.push("                ");var f=fields[d];b.push("\n");b.push('                <h3 choice-id="');b.push(MVC.View.Scanner.to_text(f.id));b.push('"><a href="#">');b.push(MVC.View.Scanner.to_text(f.name));b.push(" <strong>(");b.push(MVC.View.Scanner.to_text(f.description));b.push(")</strong></a></h3>\n");b.push("                <div>\n");
b.push('                    <fieldset style="height: 300px;">\n');b.push('                    <input type="hidden" name="');b.push(MVC.View.Scanner.to_text(f.id));b.push('" id="');b.push(MVC.View.Scanner.to_text(f.id));b.push('" >\n');b.push("                        ");$.each(f.fields,function(a,c){b.push("\n");b.push("                        ");b.push(MVC.View.Scanner.to_text(printField(a,c,values)));b.push("\n");b.push("                        ")});b.push("\n");b.push("                    </fieldset>\n");
b.push("                </div>\n");b.push("                ")}b.push("\n");b.push("                </div>\n");b.push("            </div>\n");b.push('        <div class="ui-widget help-box">\n');b.push('            <div class="ui-state-highlight ui-corner-all help-content">\n');b.push("                <p>\n");b.push('                    <span class="ui-icon ui-icon-info"></span>\n');b.push("                    ");b.push(MVC.View.Scanner.to_text(help));b.push("\n");b.push("                </p>\n");
b.push("            </div>\n");b.push("        </div>\n");b.push("    </fieldset>\n");b.push("</form>");return b.join("")}}catch(g){throw g.lineNumber=null,g;}});include.set_path("views/main");
MVC.View.PreCompiledFunction("../views/main/wizard.step.upload.ejs","views/main/wizard.step.upload.ejs",function(a,c){try{with(c)with(a){var b=[];b.push('<form id="');b.push(MVC.View.Scanner.to_text(element_id()));b.push('" class="step regular-form" action="');b.push(MVC.View.Scanner.to_text(ApplicationContext.domain));b.push('/backend/upload" method="POST" enctype="multipart/form-data" type="upload">\n');b.push('\x3c!-- content will be added after Controller.publish("initialize") event fires and FileUpload engine is initialized. See main_controller.js --\x3e\n');
b.push("</form>");return b.join("")}}catch(d){throw d.lineNumber=null,d;}});include.set_path("views/main");MVC.View.PreCompiledFunction("../views/main/final.value.ejs","views/main/final.value.ejs",function(a,c){try{with(c)with(a){var b=[];b.push('<label style="width:100%">');b.push(MVC.View.Scanner.to_text(fld_id));b.push(" = ");b.push(MVC.View.Scanner.to_text(value));b.push("</label>");return b.join("")}}catch(d){throw d.lineNumber=null,d;}});include.set_path("views/main/Welcome");
MVC.View.PreCompiledFunction("../views/main/Welcome/create.ejs","views/main/Welcome/create.ejs",function(a,c){try{with(c)with(a){var b=[];b.push('            <input type="text" name="name" id="txtNewDataSetName" class="text ui-widget-content ui-corner-all validate[required,custom[duplicateName]]">\n');b.push("                \x3c!-- TODO replace with css --\x3e\n");b.push("                <br/>\n");b.push("                <br/>\n");b.push('            <label for="tmplName">Use as template:\n');b.push('            <select id="tmplName" name="template" class="select ui-widget-content ui-corner-all">\n');
b.push('                <option value="none">none</option>\n');b.push("                ");for(var d=0,e=data.length;d<e;++d)b.push("\n"),b.push('                <option value="'),b.push(MVC.View.Scanner.to_text(data[d])),b.push('">'),b.push(MVC.View.Scanner.to_text(data[d])),b.push("</option>\n"),b.push("                ");b.push("\n");b.push("            </select>\n");b.push("            </label>");return b.join("")}}catch(f){throw f.lineNumber=null,f;}});include.set_path("views/main/Welcome");
MVC.View.PreCompiledFunction("../views/main/Welcome/dataset_row.ejs","views/main/Welcome/dataset_row.ejs",function(a,c){try{with(c)with(a){var b=[];b.push('<div class="row">\n');b.push('            <label><input type="radio" name="datasets" value="');b.push(MVC.View.Scanner.to_text(data.name));b.push('"/>');b.push(MVC.View.Scanner.to_text(data.name));b.push("</label>\n");b.push("\n");b.push('            <a href="javascript:void(0)" onclick="return false;" class="delete ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only" title="Delete">\n');
b.push('                <span class="ui-button-icon-primary ui-icon ui-icon-trash"></span>\n');b.push('                <span class="ui-button-text">...</span>\n');b.push("            </a>\n");b.push("</div>");return b.join("")}}catch(d){throw d.lineNumber=null,d;}});include.set_path("views/main/Welcome");
MVC.View.PreCompiledFunction("../views/main/Welcome/upload.ejs","views/main/Welcome/upload.ejs",function(a,c){try{with(c)with(a){var b=[];b.push('<form id="');b.push(MVC.View.Scanner.to_text(element_id()));b.push('" action="');b.push(MVC.View.Scanner.to_text(ApplicationContext.domain));b.push('/backend/upload/data" method="POST" enctype="multipart/form-data" type="upload">\n');b.push('    \x3c!-- content will be added after Controller.publish("initialize") event fires and FileUpload engine is initialized. See main_controller.js --\x3e\n');
b.push("</form>");return b.join("")}}catch(d){throw d.lineNumber=null,d;}});include.end_of_production();
